<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>THE_Jimbo_DEVz_kgt | Command Dashboard</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg-primary: #07090f;
      --bg-secondary: #0b0f1a;
      --bg-card: #090d17;
      --accent-primary: #00d9ff;
      --accent-secondary: #7c3aed;
      --accent-gold: #fbbf24;
      --accent-success: #10b981;
      --accent-warning: #f59e0b;
      --accent-danger: #ef4444;
      --accent-orange: #fb923c;
      --accent-purple: #a78bfa;
      --text-primary: #e7ecff;
      --text-secondary: #9aa6c7;
      --text-muted: #6b7696;
      --border: #1b2542;
      --border-light: rgba(27, 37, 66, 0.65);
      --shadow: 0 0 0 1px rgba(231, 236, 255, .06), 0 18px 50px rgba(0, 0, 0, .55);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    body {
      font-family: var(--sans);
      background: radial-gradient(900px 600px at 20% 0%, rgba(0, 217, 255, .10), transparent 55%),
                  radial-gradient(900px 600px at 90% 10%, rgba(124, 58, 237, .10), transparent 55%),
                  linear-gradient(180deg, var(--bg-primary), #05070c 65%);
      color: var(--text-primary);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    /* ====== HEADER ====== */
    header {
      position: sticky; top: 0; z-index: 100;
      backdrop-filter: blur(12px);
      background: linear-gradient(180deg, rgba(11, 15, 26, .95), rgba(7, 9, 15, .85));
      border-bottom: 1px solid var(--border);
      padding: 16px 24px;
      box-shadow: var(--shadow);
    }
    .header-content {
      max-width: 1500px; margin: 0 auto;
      display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px;
    }
    .header-title { display: flex; align-items: center; gap: 12px; }
    .header-title h1 {
      font: 800 20px/1.2 var(--sans);
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .header-subtitle { font: 600 11px/1 var(--mono); color: var(--text-muted); letter-spacing: 0.5px; }
    .header-stats { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .stat-badge {
      display: flex; align-items: center; gap: 6px; padding: 8px 12px;
      background: var(--bg-card); border: 1px solid var(--border);
      font: 700 11px/1 var(--mono); letter-spacing: 0.6px;
    }
    .stat-badge .number { color: var(--accent-primary); font-size: 14px; }
    .stat-badge.success .number { color: var(--accent-success); }
    .stat-badge.warning .number { color: var(--accent-warning); }
    .stat-badge.danger .number { color: var(--accent-danger); }

    /* ====== NAV TABS ====== */
    .nav-tabs { display: flex; gap: 4px; background: var(--bg-card); border: 1px solid var(--border); padding: 4px; flex-wrap: wrap; }
    .nav-tab {
      padding: 10px 16px; border: none; background: transparent;
      color: var(--text-secondary); font: 600 12px/1 var(--sans);
      cursor: pointer; transition: all 0.2s ease; letter-spacing: 0.3px; white-space: nowrap;
    }
    .nav-tab:hover { color: var(--text-primary); background: rgba(255,255,255,0.03); }
    .nav-tab.active { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; font-weight: 700; }

    /* ====== MAIN ====== */
    .container { max-width: 1500px; margin: 0 auto; padding: 24px; }
    .section { display: none; }
    .section.active { display: block; }

    /* ====== GLASS CARD ====== */
    .glass {
      background: linear-gradient(180deg, rgba(11, 15, 26, .92), rgba(9, 13, 23, .86));
      border: 1px solid var(--border); padding: 20px; margin-bottom: 16px;
      transition: all 0.2s ease;
    }
    .glass:hover { border-color: rgba(0, 217, 255, 0.2); }

    /* ====== PANEL ====== */
    .panel-header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border);
    }
    .panel-title { font: 800 14px/1 var(--mono); text-transform: uppercase; letter-spacing: 1px; color: var(--text-primary); }
    .section-label { font: 800 10px/1 var(--mono); text-transform: uppercase; letter-spacing: 1.2px; color: var(--text-muted); margin-bottom: 12px; }

    /* ====== GRID LAYOUTS ====== */
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; }
    .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
    .grid-6 { display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px; }
    @media (max-width: 1100px) { .grid-3, .grid-4 { grid-template-columns: 1fr 1fr; } .grid-6 { grid-template-columns: repeat(3,1fr); } }
    @media (max-width: 768px) { .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; } .grid-6 { grid-template-columns: repeat(2,1fr); } }

    /* ====== HEALTH ITEM ====== */
    .health-item { text-align: center; padding: 14px; }
    .health-label { font: 600 9px/1 var(--mono); text-transform: uppercase; letter-spacing: .1em; color: var(--text-muted); margin-bottom: 6px; }
    .health-value { font: 700 16px/1 var(--sans); color: var(--text-primary); }

    /* ====== COST CARDS ====== */
    .cost-card { position: relative; overflow: hidden; }
    .cost-card::before { content:''; position: absolute; top:0; left:0; right:0; height: 2px; background: linear-gradient(90deg, transparent, rgba(0,217,255,.4), transparent); }
    .cost-label { font: 600 10px/1 var(--mono); text-transform: uppercase; letter-spacing: .1em; color: var(--text-muted); margin-bottom: 6px; }
    .cost-value { font: 700 28px/1.1 var(--sans); color: var(--text-primary); }
    .cost-sub { font: 12px/1.4 var(--sans); color: var(--text-muted); margin-top: 4px; }

    /* ====== TABLES ====== */
    .dtable { width: 100%; border-collapse: separate; border-spacing: 0 3px; }
    .dtable th { padding: 8px 10px; font: 600 9px/1 var(--mono); text-transform: uppercase; letter-spacing: .1em; color: var(--text-muted); text-align: left; white-space: nowrap; }
    .dtable th.r { text-align: right; }
    .dtable td { padding: 9px 10px; font-size: 12px; color: var(--text-secondary); }
    .dtable td.r { text-align: right; }
    .dtable td.w { color: var(--text-primary); font-weight: 500; }
    .dtable td.cost { color: var(--accent-primary); font-weight: 600; }
    .dtable tr.dr { background: rgba(255,255,255,0.025); }
    .dtable tr.dr:hover { background: rgba(255,255,255,0.045); }
    .dtable tr.dr td:first-child { border-radius: 8px 0 0 8px; }
    .dtable tr.dr td:last-child { border-radius: 0 8px 8px 0; }

    /* ====== BADGES ====== */
    .badge { font: 600 9px/1 var(--mono); text-transform: uppercase; letter-spacing: .05em; padding: 3px 8px; border-radius: 4px; white-space: nowrap; }
    .badge-active { background: rgba(16,185,129,.12); color: var(--accent-success); }
    .badge-standby { background: rgba(251,191,36,.12); color: var(--accent-warning); }
    .badge-available { background: rgba(99,102,241,.12); color: var(--accent-purple); }
    .badge-cheap { background: rgba(16,185,129,.15); color: #4ade80; }
    .badge-mid { background: rgba(59,130,246,.15); color: #60a5fa; }
    .badge-premium { background: rgba(168,85,247,.15); color: #c084fc; }
    .badge-local { background: rgba(107,118,150,.15); color: var(--text-muted); }
    .badge-free { background: rgba(16,185,129,.2); color: #34d399; }

    /* ====== PULSE ANIMATION ====== */
    @keyframes pulse { 0%,100% { opacity:1; } 50% { opacity:.3; } }
    .opt-action-card { padding:12px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:6px; cursor:pointer; transition:all .2s; }
    .opt-action-card:hover { border-color:var(--accent-primary); background:rgba(0,217,255,.04); transform:translateY(-1px); }
    .opt-action-card .opt-action-title { font:700 12px/1 var(--sans); color:var(--text-primary); margin-bottom:4px; }
    .opt-action-card .opt-action-desc { font:10px/1.4 var(--sans); color:var(--text-muted); }
    .opt-action-card .opt-action-cmd { font:9px/1.3 var(--mono); color:var(--accent-primary); margin-top:6px; background:var(--bg-primary); padding:4px 6px; border-radius:3px; word-break:break-all; }
    .opt-launch-btn { padding:20px; background:var(--bg-secondary); border:2px solid var(--border); border-radius:8px; cursor:pointer; transition:all .25s; text-align:center; }
    .opt-launch-btn:hover { border-color:var(--accent-gold); background:rgba(251,191,36,.06); transform:translateY(-2px); box-shadow:0 4px 20px rgba(251,191,36,.15); }
    .opt-ps-cmd { font:11px/1.5 var(--mono); color:var(--accent-primary); padding:6px 10px; background:var(--bg-primary); border:1px solid var(--border); border-radius:4px; cursor:pointer; margin-bottom:4px; transition:all .15s; display:block; word-break:break-all; }
    .opt-ps-cmd:hover { border-color:var(--accent-primary); background:rgba(0,217,255,.05); }

    /* ====== PROGRESS BAR ====== */
    .progress-bar { width: 80px; height: 6px; background: rgba(255,255,255,0.05); border-radius: 3px; overflow: hidden; display: inline-block; vertical-align: middle; }
    .progress-fill { height: 100%; border-radius: 3px; }

    /* ====== DONUT ====== */
    .donut-container { display: flex; align-items: center; gap: 16px; height: 100%; }
    .donut { width: 120px; height: 120px; border-radius: 50%; position: relative; flex-shrink: 0; }
    .donut-hole { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); width: 55%; height: 55%; border-radius: 50%; background: var(--bg-primary); display: flex; align-items: center; justify-content: center; font: 700 14px/1 var(--sans); color: var(--text-primary); }
    .donut-legend { display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
    .donut-legend-item { display: flex; align-items: center; gap: 6px; font: 11px/1 var(--sans); color: var(--text-secondary); white-space: nowrap; }
    .donut-legend-dot { width: 8px; height: 8px; border-radius: 2px; flex-shrink: 0; }

    /* ====== BUTTONS ====== */
    .btn {
      padding: 10px 16px; border: 1px solid var(--border); background: var(--bg-card);
      color: var(--text-secondary); font: 600 12px/1 var(--sans); cursor: pointer;
      transition: all 0.2s ease; letter-spacing: 0.3px; display: inline-flex; align-items: center; gap: 6px;
    }
    .btn:hover { border-color: var(--accent-primary); color: var(--accent-primary); }
    .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); border-color: transparent; color: white; }
    .btn-primary:hover { transform: scale(1.02); box-shadow: 0 4px 12px rgba(0, 217, 255, 0.3); }
    .btn-success { background: linear-gradient(135deg, var(--accent-success), #059669); border-color: transparent; color: white; }

    /* ====== ALERTS ====== */
    .alert-item { display: flex; align-items: center; gap: 10px; padding: 10px 14px; margin-bottom: 6px; border-radius: 4px; }
    .alert-high { background: rgba(251,146,60,.06); border: 1px solid rgba(251,146,60,.15); }
    .alert-medium { background: rgba(250,204,21,.06); border: 1px solid rgba(250,204,21,.1); }
    .alert-low { background: rgba(99,102,241,.06); border: 1px solid rgba(99,102,241,.1); }
    .alert-info { background: rgba(0,217,255,.05); border: 1px solid rgba(0,217,255,.15); }
    .alert-icon { font-size: 16px; }
    .alert-msg { font: 12px/1.4 var(--sans); color: var(--text-secondary); }

    /* ====== SKILLS ACCORDION ====== */
    .skill-category-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 14px 18px; cursor: pointer; background: var(--bg-card); border: 1px solid var(--border);
      margin-bottom: 4px; transition: all 0.2s ease;
    }
    .skill-category-header:hover { border-color: var(--accent-primary); background: rgba(0,217,255,0.03); }
    .skill-category-header.open { border-color: var(--accent-primary); background: rgba(0,217,255,0.05); margin-bottom: 0; border-bottom: none; }
    .skill-category-title { font: 700 13px/1 var(--sans); color: var(--text-primary); }
    .skill-category-count { font: 600 11px/1 var(--mono); color: var(--accent-primary); }
    .skill-category-arrow { font-size: 12px; color: var(--text-muted); transition: transform 0.2s; }
    .skill-category-header.open .skill-category-arrow { transform: rotate(180deg); }
    .skill-category-body {
      display: none; border: 1px solid var(--border); border-top: none; padding: 12px;
      background: linear-gradient(180deg, rgba(9,13,23,.9), rgba(7,9,15,.9)); margin-bottom: 4px;
    }
    .skill-category-body.open { display: block; }
    .skill-tag {
      display: inline-block; padding: 5px 10px; margin: 3px; font: 500 11px/1 var(--sans);
      border: 1px solid var(--border); border-radius: 4px; cursor: pointer; transition: all 0.15s;
    }
    .skill-tag:hover { border-color: var(--accent-primary); color: var(--accent-primary); background: rgba(0,217,255,0.05); }
    .skill-tag.active { border-color: var(--accent-success); color: var(--accent-success); background: rgba(16,185,129,0.08); }

    /* ====== PIPELINE STAGES ====== */
    .pipeline-flow { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin: 16px 0; }
    .pipeline-stage {
      padding: 10px 16px; background: var(--bg-card); border: 1px solid var(--border);
      font: 600 11px/1 var(--sans); color: var(--text-secondary);
    }
    .pipeline-arrow { color: var(--accent-primary); font-size: 16px; }

    /* ====== COMMANDS ====== */
    .command-block {
      background: var(--bg-card); border: 1px solid var(--border); padding: 14px 16px;
      margin: 6px 0; font: 13px/1.6 var(--mono); color: var(--accent-primary);
      cursor: pointer; transition: all 0.2s ease;
    }
    .command-block:hover { border-color: var(--accent-primary); box-shadow: 0 0 0 3px rgba(0,217,255,0.1); }

    /* ====== TASK ITEMS ====== */
    .task-list { list-style: none; max-height: 400px; overflow-y: auto; }
    .task-item {
      display: flex; align-items: center; gap: 12px; padding: 12px;
      background: var(--bg-card); border: 1px solid var(--border-light); margin-bottom: 6px; transition: all 0.2s;
    }
    .task-item:hover { border-color: var(--accent-primary); }
    .task-item.completed { opacity: 0.5; background: rgba(16,185,129,0.03); }
    .task-item.completed .task-text { text-decoration: line-through; color: var(--text-muted); }
    .task-checkbox { width: 18px; height: 18px; accent-color: var(--accent-success); cursor: pointer; }
    .task-text { font: 13px/1.4 var(--sans); color: var(--text-primary); flex: 1; }
    .task-tag { font: 10px/1 var(--mono); text-transform: uppercase; padding: 2px 6px; border-radius: 3px; }
    .task-tag.priority-high { background: rgba(239,68,68,.15); color: var(--accent-danger); }
    .task-tag.priority-medium { background: rgba(245,158,11,.15); color: var(--accent-warning); }
    .task-tag.priority-low { background: rgba(16,185,129,.15); color: var(--accent-success); }
    .task-btn { padding: 4px 8px; background: none; border: 1px solid var(--border); color: var(--text-muted); font: 10px/1 var(--mono); cursor: pointer; }
    .task-btn:hover { border-color: var(--accent-danger); color: var(--accent-danger); }
    .add-task-form { display: flex; gap: 10px; margin-bottom: 16px; }
    .add-task-form input, .add-task-form select {
      padding: 10px 14px; background: var(--bg-card); border: 1px solid var(--border);
      color: var(--text-primary); font: 13px/1 var(--sans); outline: none;
    }
    .add-task-form input { flex: 1; }
    .add-task-form input:focus { border-color: var(--accent-primary); }

    /* ====== DOD ====== */
    .dod-item {
      display: flex; align-items: center; gap: 12px; padding: 10px;
      background: var(--bg-card); border: 1px solid var(--border-light); margin-bottom: 6px;
    }
    .dod-item.checked { background: rgba(16,185,129,0.04); border-color: rgba(16,185,129,0.25); }
    .dod-item.checked label { color: var(--text-muted); text-decoration: line-through; }
    .dod-item label { font: 13px/1.4 var(--sans); color: var(--text-primary); cursor: pointer; flex: 1; }

    /* ====== NOTES ====== */
    .notes-textarea {
      width: 100%; min-height: 200px; padding: 16px;
      background: var(--bg-card); border: 1px solid var(--border);
      color: var(--text-primary); font: 13px/1.7 var(--mono); resize: vertical; outline: none;
    }
    .notes-textarea:focus { border-color: var(--accent-primary); }

    /* ====== TOAST ====== */
    .toast {
      position: fixed; bottom: 24px; right: 24px;
      background: var(--bg-secondary); border: 1px solid var(--accent-success);
      padding: 14px 18px; box-shadow: var(--shadow);
      transform: translateX(400px); transition: transform 0.3s ease; z-index: 3000;
      display: flex; align-items: center; gap: 10px;
    }
    .toast.show { transform: translateX(0); }
    .toast-title { font: 700 13px/1 var(--sans); color: var(--text-primary); }
    .toast-message { font: 11px/1.3 var(--sans); color: var(--text-secondary); margin-top: 2px; }

    /* ====== MODEL CARD ====== */
    .model-card {
      background: var(--bg-card); border: 1px solid var(--border); padding: 16px;
      text-align: center; transition: all 0.2s;
    }
    .model-card:hover { border-color: var(--accent-primary); transform: translateY(-2px); }
    .model-name { font: 600 13px/1.2 var(--sans); color: var(--text-primary); margin-top: 6px; }
    .model-provider { font: 10px/1 var(--mono); color: var(--text-muted); margin-top: 4px; }
    .model-price { font: 700 16px/1 var(--sans); color: var(--accent-primary); margin-top: 8px; }
    .model-price-unit { font: 10px/1 var(--mono); color: var(--text-muted); }

    /* ====== MISC ====== */
    .price-comparison { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 12px; }
    .full-width { grid-column: 1 / -1; }
    .panel-actions { display: flex; gap: 10px; margin-top: 16px; }
    .scroll-x { overflow-x: auto; }
  </style>
</head>
<body>

  <!-- ============================= HEADER ============================= -->
  <header>
    <div class="header-content">
      <div class="header-title">
        <div>
          <h1>THE_Jimbo_DEVz_kgt</h1>
          <div class="header-subtitle">Knowledge ¬∑ Gateway ¬∑ Toolkit ‚Äî v1.0</div>
        </div>
      </div>

      <div class="header-stats">
        <div class="stat-badge"><span>Models:</span><span class="number" id="statModels">8</span></div>
        <div class="stat-badge success"><span>Skills:</span><span class="number" id="statSkills">46</span></div>
        <div class="stat-badge warning"><span>Budget:</span><span class="number" id="statBudget">$500</span></div>
        <div class="stat-badge"><span>Tasks:</span><span class="number" id="statTasks">0</span></div>
        <div class="stat-badge"><span>Apps:</span><span class="number">3</span></div>
      </div>

      <nav class="nav-tabs">
        <button class="nav-tab active" data-section="overview">Overview</button>
        <button class="nav-tab" data-section="models">AI Models</button>
        <button class="nav-tab" data-section="ailib">üß¨ AI Library</button>
        <button class="nav-tab" data-section="cloudflare">Cloudflare</button>
        <button class="nav-tab" data-section="moa">MOA Pipeline</button>
        <button class="nav-tab" data-section="skills">Skills</button>
        <button class="nav-tab" data-section="tasks">Tasks & DoD</button>
        <button class="nav-tab" data-section="agent">Agent Zero</button>
        <button class="nav-tab" data-section="optimaiser">üîß Optimaiser</button>
        <button class="nav-tab" data-section="netctrl">üåê Net Control</button>
        <button class="nav-tab" data-section="commands">‚ö° Commands</button>
        <button class="nav-tab" data-section="notes">Notes</button>
      </nav>
    </div>
  </header>

  <main class="container">

    <!-- ============================== OVERVIEW ============================== -->
    <section id="overview-section" class="section active">

      <!-- Alerts -->
      <div id="alertsArea" style="margin-bottom: 16px;"></div>

      <!-- System Health -->
      <div class="grid-6" style="margin-bottom: 20px;">
        <div class="glass health-item"><div class="health-label">Workspace</div><div class="health-value" style="color:var(--accent-success);">‚óè Active</div></div>
        <div class="glass health-item"><div class="health-label">AI Models</div><div class="health-value">8</div></div>
        <div class="glass health-item"><div class="health-label">CF Workers</div><div class="health-value">4</div></div>
        <div class="glass health-item"><div class="health-label">Agent Profiles</div><div class="health-value">7</div></div>
        <div class="glass health-item"><div class="health-label">MOA Stages</div><div class="health-value">5</div></div>
        <div class="glass health-item"><div class="health-label">Skills</div><div class="health-value">46</div></div>
        <div class="glass health-item"><div class="health-label">Optimaiser</div><div class="health-value" style="color:var(--accent-success);">3 EXE</div></div>
        <div class="glass health-item"><div class="health-label">Net Control</div><div class="health-value" style="color:var(--accent-primary);">12 comp</div></div>
        <div class="glass health-item"><div class="health-label">A0 Docs</div><div class="health-value">17 files</div></div>
      </div>

      <!-- Cost Overview (editable) -->
      <div class="grid-4" style="margin-bottom: 20px;">
        <div class="glass cost-card">
          <div class="cost-label">ü§ñ AI Budget / miesiƒÖc</div>
          <div class="cost-value budget-ai">$300</div>
          <div class="cost-sub">Limit na modele AI</div>
        </div>
        <div class="glass cost-card">
          <div class="cost-label">‚òÅÔ∏è Cloudflare / miesiƒÖc</div>
          <div class="cost-value budget-cf">$100</div>
          <div class="cost-sub">Infra + workers + D1 + R2</div>
        </div>
        <div class="glass cost-card">
          <div class="cost-label">üõ°Ô∏è Buffer</div>
          <div class="cost-value budget-buffer">$100</div>
          <div class="cost-sub">Zapas na nieprzewidziane</div>
        </div>
        <div class="glass cost-card">
          <div class="cost-label">üí∞ Total Budget</div>
          <div class="cost-value budget-total" style="color:var(--accent-primary);">$500</div>
          <div class="cost-sub">Miesiƒôczny limit ca≈Çkowity</div>
        </div>
      </div>

      <!-- Budget Editor -->
      <div class="glass" style="margin-bottom:20px; border-top:2px solid var(--accent-gold);">
        <div class="panel-header">
          <h2 class="panel-title">‚öôÔ∏è Edytuj bud≈ºet miesiƒôczny</h2>
          <button class="btn" onclick="resetBudget()" title="Przywr√≥ƒá domy≈õlne: AI $300, CF $100, Buffer $100">üîÑ Reset</button>
        </div>
        <p style="font:11px/1.5 var(--sans); color:var(--text-muted); margin-bottom:14px;">Zmie≈Ñ warto≈õci i naci≈õnij Enter lub Tab. Zmiany zapisujƒÖ siƒô automatycznie w localStorage. Total liczy siƒô jako AI + CF + Buffer.</p>
        <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:12px;">
          <div>
            <label style="font:600 10px/1 var(--mono); text-transform:uppercase; letter-spacing:.1em; color:var(--text-muted); display:block; margin-bottom:6px;">ü§ñ AI Models ($)</label>
            <input type="number" class="budget-input" data-field="ai" value="300" min="0" step="10" onchange="setBudgetField('ai',this.value)" style="width:100%; padding:10px 12px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--accent-primary); font:700 18px var(--mono); outline:none; border-radius:4px; text-align:center;">
          </div>
          <div>
            <label style="font:600 10px/1 var(--mono); text-transform:uppercase; letter-spacing:.1em; color:var(--text-muted); display:block; margin-bottom:6px;">‚òÅÔ∏è Cloudflare ($)</label>
            <input type="number" class="budget-input" data-field="cf" value="100" min="0" step="10" onchange="setBudgetField('cf',this.value)" style="width:100%; padding:10px 12px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--accent-primary); font:700 18px var(--mono); outline:none; border-radius:4px; text-align:center;">
          </div>
          <div>
            <label style="font:600 10px/1 var(--mono); text-transform:uppercase; letter-spacing:.1em; color:var(--text-muted); display:block; margin-bottom:6px;">üõ°Ô∏è Buffer ($)</label>
            <input type="number" class="budget-input" data-field="buffer" value="100" min="0" step="10" onchange="setBudgetField('buffer',this.value)" style="width:100%; padding:10px 12px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--accent-primary); font:700 18px var(--mono); outline:none; border-radius:4px; text-align:center;">
          </div>
          <div>
            <label style="font:600 10px/1 var(--mono); text-transform:uppercase; letter-spacing:.1em; color:var(--text-muted); display:block; margin-bottom:6px;">üí∞ TOTAL (auto)</label>
            <div class="budget-total" style="padding:10px 12px; background:rgba(0,217,255,0.05); border:1px solid var(--accent-primary); color:var(--accent-primary); font:700 18px var(--mono); text-align:center; border-radius:4px;">$500</div>
          </div>
        </div>
      </div>

      <!-- Cost Breakdown Donut + Model Quick Stats -->
      <div class="grid-2">
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üíµ Podzia≈Ç koszt√≥w AI (per product)</h2></div>
          <div class="donut-container">
            <div class="donut" id="overviewDonut"><div class="donut-hole">~$0.20</div></div>
            <div class="donut-legend" id="overviewDonutLegend"></div>
          </div>
          <div style="margin-top: 12px; font: 11px/1.6 var(--sans); color: var(--text-muted);">
            Szacowany koszt na opis produktu: $0.15‚Äì$0.25<br>
            Pipeline: 3 writery + krytyk (2 iteracje) + agregator
          </div>
        </div>
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üèóÔ∏è Infrastruktura Cloudflare</h2></div>
          <div id="cfQuickBreakdown"></div>
        </div>
      </div>

      <!-- Agent Zero Quick Info -->
      <div class="glass" style="margin-top: 16px;">
        <div class="panel-header"><h2 class="panel-title">ü§ñ Agent Zero ‚Äî Profil JIMBO</h2></div>
        <div class="grid-3">
          <div>
            <div class="section-label">Specjalizacja</div>
            <div style="font: 13px/1.6 var(--sans); color: var(--text-secondary);">
              MOA Content Generator<br>
              E-commerce (WHITECAT / Meble Pumo)<br>
              K.R.A.F.T. Framework
            </div>
          </div>
          <div>
            <div class="section-label">Narzƒôdzia MOA</div>
            <div style="font: 13px/1.6 var(--sans); color: var(--text-secondary);">
              moa_writer_tool.py<br>
              moa_critic_tool.py<br>
              moa_aggregator_tool.py
            </div>
          </div>
          <div>
            <div class="section-label">Dostƒôpne Profile</div>
            <div style="font: 13px/1.6 var(--sans); color: var(--text-secondary);">
              jimbo ¬∑ default ¬∑ developer<br>
              hacker ¬∑ researcher ¬∑ agent0
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================== AI MODELS ============================== -->
    <section id="models-section" class="section">
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üí∞ Por√≥wnanie cen modeli AI</h2></div>
        <div class="scroll-x">
          <table class="dtable" id="modelsTable">
            <thead>
              <tr>
                <th>Model</th>
                <th>Rola</th>
                <th>Provider</th>
                <th class="r">Input $/1M</th>
                <th class="r">Output $/1M</th>
                <th class="r">Cache $/1M</th>
                <th class="r">Context</th>
                <th class="r">Max Tokens</th>
                <th>Status</th>
                <th>Tier</th>
              </tr>
            </thead>
            <tbody id="modelsBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Price Comparison Cards -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üìä Karty cenowe ‚Äî wizualnie</h2></div>
        <div class="price-comparison" id="priceCards"></div>
      </div>

      <!-- Cost Calculator -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üßÆ Kalkulator koszt√≥w</h2></div>
        <div style="font: 12px/1.6 var(--mono); color: var(--text-secondary); margin-bottom: 12px;">
          Formu≈Ça: <span style="color:var(--accent-primary);">(input_tokens / 1M √ó input_price) + (output_tokens / 1M √ó output_price)</span>
        </div>
        <div class="grid-3">
          <div>
            <label style="font: 600 11px/1 var(--mono); color: var(--text-muted);">INPUT TOKENS</label>
            <input type="number" id="calcInput" value="15000" style="width:100%; margin-top:6px; padding:10px; background:var(--bg-card); border:1px solid var(--border); color:var(--text-primary); font:13px var(--mono); outline:none;">
          </div>
          <div>
            <label style="font: 600 11px/1 var(--mono); color: var(--text-muted);">OUTPUT TOKENS</label>
            <input type="number" id="calcOutput" value="3000" style="width:100%; margin-top:6px; padding:10px; background:var(--bg-card); border:1px solid var(--border); color:var(--text-primary); font:13px var(--mono); outline:none;">
          </div>
          <div>
            <button class="btn btn-primary" onclick="calculateCosts()" style="margin-top:18px; width:100%;">Oblicz koszty</button>
          </div>
        </div>
        <div id="calcResults" style="margin-top: 16px;"></div>
      </div>

      <!-- Reference Models from OpenClaw -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üåê Referencyjne modele (OpenClaw Data)</h2></div>
        <p style="font: 11px/1.5 var(--sans); color: var(--text-muted); margin-bottom: 12px;">
          Dane z zewnƒôtrznego systemu OpenClaw Dashboard ‚Äî modele dostƒôpne na rynku.
        </p>
        <div class="grid-3" id="openclawModelsGrid"></div>
      </div>
    </section>

    <!-- ============================== AI LIBRARY ============================== -->
    <section id="ailib-section" class="section">
      <!-- Search & filter -->
      <div class="glass" style="margin-bottom:0;">
        <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
          <input type="text" id="ailibSearch" placeholder="üîç Szukaj modelu, narzƒôdzia, providera..." oninput="filterAiLib()" style="flex:1; min-width:200px; padding:10px 14px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--mono); outline:none;">
          <select id="ailibCat" onchange="filterAiLib()" style="padding:10px 14px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--sans); outline:none;">
            <option value="all">Wszystkie kategorie</option>
            <option value="stt">üé§ Speech-to-Text</option>
            <option value="tts">üîä Text-to-Speech</option>
            <option value="vision">üëÅÔ∏è Vision / OCR</option>
            <option value="image">üé® Image Generation</option>
            <option value="video">üé¨ Video Generation</option>
            <option value="music">üéµ Music / Audio</option>
            <option value="nlp">üìù NLP / Translation</option>
            <option value="embed">üìê Embeddings</option>
            <option value="safety">üõ°Ô∏è Safety / Moderation</option>
            <option value="multi">üß© Multimodal</option>
          </select>
          <span id="ailibCount" style="font:11px var(--mono); color:var(--accent-primary);"></span>
        </div>
      </div>

      <!-- Expert Models -->
      <div class="glass" style="border-top:3px solid var(--accent-secondary);">
        <div class="panel-header">
          <h2 class="panel-title">üß¨ Expert Models ‚Äî Niestandardowe AI</h2>
          <span style="font:10px var(--mono); color:var(--text-muted);">Modele specjalistyczne, nie-LLM</span>
        </div>
        <p style="font:11px/1.5 var(--sans); color:var(--text-muted); margin-bottom:16px;">
          Kompletna biblioteka modeli AI wykraczajƒÖcych poza standardowe LLM. Speech, Vision, Image Gen, Video, Music, OCR, Translation, Embeddings, Safety i wiƒôcej.
          Inspiracja: <strong style="color:var(--accent-primary);">Eden AI Expert Models</strong> (507 modeli, 52 provider√≥w).
        </p>
        <div class="scroll-x">
          <table class="dtable" id="expertModelsTable">
            <thead>
              <tr>
                <th>Model</th>
                <th>Kategoria</th>
                <th>Provider</th>
                <th class="r">Cena</th>
                <th>Jednostka</th>
                <th>Specjalno≈õƒá</th>
                <th>Jako≈õƒá</th>
              </tr>
            </thead>
            <tbody id="expertModelsBody"></tbody>
          </table>
        </div>
      </div>

      <!-- AI Tools & Platforms -->
      <div class="glass" style="border-top:3px solid var(--accent-gold);">
        <div class="panel-header">
          <h2 class="panel-title">üõ†Ô∏è AI Tools & Platformy</h2>
          <span style="font:10px var(--mono); color:var(--text-muted);">Kompendium narzƒôdzi</span>
        </div>
        <div class="grid-3" id="aiToolsGrid"></div>
      </div>

      <!-- AI Providers Map -->
      <div class="glass" style="border-top:3px solid var(--accent-primary);">
        <div class="panel-header">
          <h2 class="panel-title">üó∫Ô∏è Mapa Dostawc√≥w AI</h2>
          <span style="font:10px var(--mono); color:var(--text-muted);">Providerzy + specjalizacje</span>
        </div>
        <div id="aiProvidersGrid"></div>
      </div>

      <!-- Quick comparison -->
      <div class="glass" style="border-top:3px solid var(--accent-success);">
        <div class="panel-header">
          <h2 class="panel-title">‚ö° Szybkie por√≥wnanie ‚Äî kiedy co u≈ºyƒá?</h2>
        </div>
        <div id="aiUseCases"></div>
      </div>
    </section>

    <!-- ============================== CLOUDFLARE ============================== -->
    <section id="cloudflare-section" class="section">
      <!-- Workers -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">‚ö° Cloudflare Workers</h2></div>
        <div class="scroll-x">
          <table class="dtable">
            <thead><tr><th>Worker</th><th>Opis</th><th>Route</th><th class="r">Req/dzie≈Ñ</th><th class="r">Est. miesiƒÖc</th></tr></thead>
            <tbody id="cfWorkersBody"></tbody>
          </table>
        </div>
      </div>

      <!-- D1 + R2 + KV -->
      <div class="grid-2">
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üóÑÔ∏è D1 Databases</h2></div>
          <div class="scroll-x">
            <table class="dtable">
              <thead><tr><th>Baza</th><th>Opis</th><th class="r">Rozmiar</th><th class="r">Query/dzie≈Ñ</th><th class="r">Est. miesiƒÖc</th></tr></thead>
              <tbody id="cfD1Body"></tbody>
            </table>
          </div>
        </div>
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üì¶ R2 Storage</h2></div>
          <div class="scroll-x">
            <table class="dtable">
              <thead><tr><th>Bucket</th><th>Opis</th><th class="r">Rozmiar</th><th class="r">Obiekty</th><th class="r">Est. miesiƒÖc</th></tr></thead>
              <tbody id="cfR2Body"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="grid-2">
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üîë KV Namespaces</h2></div>
          <div class="scroll-x">
            <table class="dtable">
              <thead><tr><th>Namespace</th><th>Opis</th><th class="r">Keys</th><th class="r">Est. miesiƒÖc</th></tr></thead>
              <tbody id="cfKVBody"></tbody>
            </table>
          </div>
        </div>
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üöÄ Hyperdrive</h2></div>
          <div class="scroll-x">
            <table class="dtable">
              <thead><tr><th>Po≈ÇƒÖczenie</th><th>Baza</th><th class="r">Connections</th><th class="r">Req/dzie≈Ñ</th><th class="r">Est. miesiƒÖc</th></tr></thead>
              <tbody id="cfHyperBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- CF Cost Summary -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üìã Podsumowanie koszt√≥w CF</h2></div>
        <div id="cfCostSummary"></div>
      </div>
    </section>

    <!-- ============================== MOA PIPELINE ============================== -->
    <section id="moa-section" class="section">
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üîÑ MOA Pipeline ‚Äî WHITECAT Content Generator</h2></div>
        <div style="font: 12px/1.5 var(--sans); color: var(--text-secondary); margin-bottom: 12px;">
          Mixture of Agents pipeline generujƒÖcy opisy produkt√≥w meblowych.
          Jƒôzyk wyj≈õcia: <strong style="color:var(--accent-primary);">polski</strong>.
          Format: <strong>Markdown</strong>.
        </div>
        <div class="pipeline-flow" id="pipelineFlow"></div>
      </div>

      <!-- Writers -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">‚úçÔ∏è Writer Agents</h2></div>
        <div class="grid-3" id="moaWriters"></div>
      </div>

      <!-- Critic + Aggregator -->
      <div class="grid-2">
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üîç Critic Agent</h2></div>
          <div id="moaCritic"></div>
        </div>
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üß© Aggregator</h2></div>
          <div id="moaAggregator"></div>
        </div>
      </div>

      <!-- Quality Criteria -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üìè Kryteria Jako≈õci</h2></div>
        <div class="scroll-x">
          <table class="dtable">
            <thead><tr><th>Kryterium</th><th>Opis</th><th class="r">Target</th><th class="r">Waga</th></tr></thead>
            <tbody id="moaCriteriaBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Monitoring -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üì° Monitoring & Alerty</h2></div>
        <div id="moaMonitoring"></div>
      </div>
    </section>

    <!-- ============================== SKILLS ============================== -->
    <section id="skills-section" class="section">
      <div style="margin-bottom: 16px; display: flex; gap: 8px; align-items: center;">
        <input type="text" id="skillSearch" placeholder="Szukaj skilli..." style="flex:1; padding:12px 16px; background:var(--bg-card); border:1px solid var(--border); color:var(--text-primary); font:14px var(--sans); outline:none;">
      </div>
      <div id="skillsAccordion"></div>
    </section>

    <!-- ============================== TASKS & DOD ============================== -->
    <section id="tasks-section" class="section">
      <div class="grid-2">
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">üìã Task List</h2><button class="btn" onclick="clearCompletedTasks()">Clear Done</button></div>
          <div class="add-task-form">
            <input type="text" id="newTaskInput" placeholder="Nowe zadanie... (Enter)">
            <select id="newTaskPriority">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
            </select>
            <button class="btn btn-primary" onclick="addNewTask()">+ Add</button>
          </div>
          <ul class="task-list" id="taskList"></ul>
        </div>
        <div class="glass">
          <div class="panel-header"><h2 class="panel-title">‚úÖ Definition of Done</h2><button class="btn" onclick="resetDoD()">Reset</button></div>
          <ul id="dodList" style="list-style:none;"></ul>
          <div style="margin-top:20px; padding-top:16px; border-top:1px solid var(--border);">
            <div class="section-label">‚ö†Ô∏è Agent Red Lines</div>
            <ul style="font: 12px/1.8 var(--sans); color: var(--text-secondary); list-style: none;">
              <li>‚ùå Nie ignoruj b≈Çƒôd√≥w</li>
              <li>‚ùå Nie commituj secrets</li>
              <li>‚ùå Nie pomi≈Ñ type-check</li>
              <li>‚ùå Nie zostawiaj dead code bez TODO</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================== AGENT ZERO ============================== -->
    <section id="agent-section" class="section">
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">ü§ñ Agent Zero ‚Äî Konfiguracja</h2></div>
        <div class="grid-3">
          <div>
            <div class="section-label">Porty systemowe</div>
            <table class="dtable">
              <tbody>
                <tr class="dr"><td class="w">Agent Zero WebUI</td><td class="r">50082</td></tr>
                <tr class="dr"><td class="w">Agent Zero SSH</td><td class="r">50101</td></tr>
                <tr class="dr"><td class="w">Dashboard Backend</td><td class="r">3880</td></tr>
                <tr class="dr"><td class="w">Dashboard Frontend</td><td class="r">3881</td></tr>
                <tr class="dr"><td class="w">API Gateway</td><td class="r">8001</td></tr>
              </tbody>
            </table>
          </div>
          <div>
            <div class="section-label">Kontener Docker</div>
            <div style="font: 12px/1.7 var(--sans); color: var(--text-secondary);">
              <strong style="color:var(--text-primary);">bonzo-agent-zero</strong><br>
              Image: agent-zero-mcp:conda<br>
              Workspace: T:\DOcker_aGENT_zero<br>
              Hub: U:\The_yellow_hub
            </div>
          </div>
          <div>
            <div class="section-label">Profile agent√≥w</div>
            <div id="agentProfiles"></div>
          </div>
        </div>
      </div>

      <!-- Model Providers -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üîå Providerzy modeli (21)</h2></div>
        <div class="scroll-x">
          <table class="dtable">
            <thead><tr><th>ID</th><th>Nazwa</th><th>LiteLLM Provider</th><th>Uwagi</th></tr></thead>
            <tbody id="providersBody"></tbody>
          </table>
        </div>
      </div>

      <!-- MCP Servers -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üß© MCP Servers</h2></div>
        <div style="display:flex; flex-wrap:wrap; gap:6px;" id="mcpServersList"></div>
      </div>

      <!-- Agent Zero Documentation Reference -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üìö Dokumentacja Agent Zero</h2></div>
        <div class="grid-3" id="a0DocsGrid"></div>
      </div>

      <!-- Architecture Overview -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üèóÔ∏è Architektura ‚Äî Komponenty</h2></div>
        <div id="a0ArchOverview"></div>
      </div>

      <!-- API & Connectivity -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üîå API & Connectivity</h2></div>
        <div id="a0Connectivity"></div>
      </div>

      <!-- Extensions & Tools -->
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">‚öôÔ∏è Extensions & Custom Tools</h2></div>
        <div id="a0Extensions"></div>
      </div>
    </section>

    <!-- ============================== OPTIMAISER ============================== -->
    <section id="optimaiser-section" class="section">

      <!-- ===== LIVE SYSTEM MONITOR ===== -->
      <div class="glass" style="border-top:3px solid var(--accent-success);">
        <div class="panel-header">
          <h2 class="panel-title">üì° Live System Monitor</h2>
          <div style="display:flex; gap:6px; align-items:center;">
            <span id="optLiveIndicator" style="display:inline-block; width:8px; height:8px; border-radius:50%; background:var(--accent-success); animation:pulse 1.5s infinite;"></span>
            <span style="font:10px var(--mono); color:var(--accent-success);" id="optLiveStatus">LIVE</span>
            <button class="btn" onclick="toggleLiveMonitor()" id="optToggleBtn" title="Start/Stop">‚è∏Ô∏è</button>
            <button class="btn" onclick="refreshLiveMetrics()" title="Od≈õwie≈º teraz">üîÑ</button>
          </div>
        </div>

        <!-- Live metrics grid -->
        <div class="grid-6" style="margin-bottom:16px;" id="optLiveGrid">
          <div class="glass health-item" style="margin:0;">
            <div class="health-label">üß† CPU Threads</div>
            <div class="health-value" id="optCpuCores">‚Äî</div>
          </div>
          <div class="glass health-item" style="margin:0;">
            <div class="health-label">üíæ RAM (approx)</div>
            <div class="health-value" id="optRam">‚Äî</div>
          </div>
          <div class="glass health-item" style="margin:0;">
            <div class="health-label">üìÄ Storage Used</div>
            <div class="health-value" id="optStorage">‚Äî</div>
          </div>
          <div class="glass health-item" style="margin:0;">
            <div class="health-label">üîã Battery</div>
            <div class="health-value" id="optBattery">‚Äî</div>
          </div>
          <div class="glass health-item" style="margin:0;">
            <div class="health-label">üåê Network</div>
            <div class="health-value" id="optNetwork">‚Äî</div>
          </div>
          <div class="glass health-item" style="margin:0;">
            <div class="health-label">üñ•Ô∏è Screen</div>
            <div class="health-value" id="optScreen">‚Äî</div>
          </div>
        </div>

        <!-- JS Performance -->
        <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:8px; margin-bottom:16px;" id="optPerfGrid">
          <div style="padding:10px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:4px; text-align:center;">
            <div style="font:600 9px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; margin-bottom:4px;">JS Heap Used</div>
            <div style="font:700 16px var(--mono); color:var(--accent-primary);" id="optHeapUsed">‚Äî</div>
          </div>
          <div style="padding:10px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:4px; text-align:center;">
            <div style="font:600 9px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; margin-bottom:4px;">JS Heap Total</div>
            <div style="font:700 16px var(--mono); color:var(--accent-primary);" id="optHeapTotal">‚Äî</div>
          </div>
          <div style="padding:10px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:4px; text-align:center;">
            <div style="font:600 9px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; margin-bottom:4px;">Page Load</div>
            <div style="font:700 16px var(--mono); color:var(--accent-primary);" id="optPageLoad">‚Äî</div>
          </div>
          <div style="padding:10px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:4px; text-align:center;">
            <div style="font:600 9px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; margin-bottom:4px;">DOM Nodes</div>
            <div style="font:700 16px var(--mono); color:var(--accent-primary);" id="optDomNodes">‚Äî</div>
          </div>
          <div style="padding:10px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:4px; text-align:center;">
            <div style="font:600 9px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; margin-bottom:4px;">Uptime</div>
            <div style="font:700 16px var(--mono); color:var(--accent-success);" id="optUptime">‚Äî</div>
          </div>
          <div style="padding:10px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:4px; text-align:center;">
            <div style="font:600 9px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; margin-bottom:4px;">Color Depth</div>
            <div style="font:700 16px var(--mono); color:var(--accent-gold);" id="optColorDepth">‚Äî</div>
          </div>
        </div>

        <!-- Live history chart (text-based) -->
        <div style="padding:12px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:4px;">
          <div style="font:600 10px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; margin-bottom:8px;">üìà JS Heap History (last 30 samples)</div>
          <div id="optHeapChart" style="font:10px var(--mono); color:var(--accent-primary); white-space:pre; line-height:1.1; overflow-x:auto;"></div>
        </div>
      </div>

      <!-- ===== QUICK LAUNCH EXEs ===== -->
      <div class="glass" style="border-top:3px solid var(--accent-gold);">
        <div class="panel-header">
          <h2 class="panel-title">üöÄ Uruchom Optimaiser (EXE)</h2>
          <span style="font:10px var(--mono); color:var(--text-muted);">Kliknij = kopiuj komendƒô start do schowka</span>
        </div>
        <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:12px;" id="optLaunchGrid"></div>
        <p style="font:10px/1.5 var(--sans); color:var(--text-muted); margin-top:12px;">üí° Wklej skopiowanƒÖ komendƒô w PowerShell / CMD / Win+R aby uruchomiƒá EXE.</p>
      </div>

      <!-- ===== QUICK ACTIONS (one-click PS commands) ===== -->
      <div class="glass" style="border-top:3px solid var(--accent-primary);">
        <div class="panel-header">
          <h2 class="panel-title">‚ö° Quick Actions ‚Äî System Optimizer</h2>
          <span style="font:10px var(--mono); color:var(--text-muted);">Kliknij = kopiuj PowerShell do schowka</span>
        </div>
        <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:8px;" id="optQuickActions"></div>
      </div>

      <!-- ===== DEEP SYSTEM MONITOR (PS commands) ===== -->
      <div class="glass" style="border-top:3px solid var(--accent-secondary);">
        <div class="panel-header">
          <h2 class="panel-title">üî¨ Deep System Monitor (PowerShell)</h2>
          <button class="btn btn-primary" onclick="copyAllOptPS()" title="Skopiuj wszystkie komendy">üìã Kopiuj wszystko</button>
        </div>
        <p style="font:11px/1.5 var(--sans); color:var(--text-muted); margin-bottom:12px;">Kliknij komendƒô ‚Üí kopiuje do schowka. Wklej w PowerShell (admin) dla pe≈Çnego monitoringu.</p>
        <div id="optDeepMonitor"></div>
      </div>

      <!-- ===== ORIGINAL SECTIONS ===== -->
      <div class="glass">
        <div class="panel-header">
          <h2 class="panel-title">üîß PC Optimizer ‚Äî Komponenty</h2>
          <span style="font:10px var(--mono); color:var(--text-muted);">optimaiser/</span>
        </div>
        <p style="font:12px/1.6 var(--sans); color:var(--text-secondary); margin-bottom:16px;">
          Narzƒôdzie do optymalizacji systemu Windows ‚Äî monitoring CPU/RAM/GPU/Dysk, czyszczenie plik√≥w tymczasowych, zarzƒÖdzanie procesami startowymi.
          Stack: Python + PyQt5 + psutil + GPUtil + WMI + SQLite.
        </p>
        <div class="grid-2" id="optimaiserComponents"></div>
      </div>

      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üì¶ Gotowe EXE (dist/)</h2></div>
        <div id="optimaiserExeList"></div>
      </div>

      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üìä Funkcje systemu</h2></div>
        <div class="grid-3" id="optimaiserFeatures"></div>
      </div>

      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üìã Zale≈ºno≈õci (requirements.txt)</h2></div>
        <div id="optimaiserDeps"></div>
      </div>
    </section>

    <!-- ============================== NET CONTROL ============================== -->
    <section id="netctrl-section" class="section">
      <div class="glass">
        <div class="panel-header">
          <h2 class="panel-title">üåê Jimbo Net Control v1.2</h2>
          <span style="font:10px var(--mono); color:var(--text-muted);">jimbo_net_cntrl_1.zip</span>
        </div>
        <p style="font:12px/1.6 var(--sans); color:var(--text-secondary); margin-bottom:16px;">
          Zaawansowana platforma do monitorowania infrastruktury lokalnej i zarzƒÖdzania tunelami sieciowymi wspomagana przez agent√≥w AI (Gemini).
          Stack: React 19 + TypeScript + Vite + Recharts + @google/genai.
        </p>
        <div class="grid-3" id="netctrlOverview"></div>
      </div>

      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üß© Komponenty React</h2></div>
        <div class="scroll-x">
          <table class="dtable">
            <thead><tr><th>Komponent</th><th>Opis</th><th class="r">Rozmiar</th></tr></thead>
            <tbody id="netctrlComponents"></tbody>
          </table>
        </div>
      </div>

      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üõ°Ô∏è Agenty AI & Tunele</h2></div>
        <div class="grid-2" id="netctrlAgents"></div>
      </div>

      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üîß Serwisy & Hooki</h2></div>
        <div class="grid-3" id="netctrlServices"></div>
      </div>

      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üì° Typy danych (types.ts)</h2></div>
        <div id="netctrlTypes"></div>
      </div>
    </section>

    <!-- ============================== COMMANDS ============================== -->
    <section id="commands-section" class="section">
      <!-- Command filter -->
      <div class="glass" style="margin-bottom:0;">
        <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
          <input type="text" id="cmdSearch" placeholder="üîç Szukaj komendy..." oninput="filterCommands()" style="flex:1; min-width:200px; padding:10px 14px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--mono); outline:none;">
          <select id="cmdFilter" onchange="filterCommands()" style="padding:10px 14px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--sans); outline:none;">
            <option value="all">Wszystkie grupy</option>
            <option value="OPSX">OPSX</option>
            <option value="Podman">Podman & A0</option>
            <option value="PowerShell">PowerShell</option>
            <option value="CMD">CMD</option>
            <option value="Win+R">Win+R</option>
            <option value="OpenSpec">OpenSpec CLI</option>
          </select>
          <button class="btn btn-primary" onclick="copyAllCommands()">üìã Kopiuj</button>
        </div>
      </div>

      <div class="glass">
        <p style="font: 12px/1.5 var(--sans); color: var(--text-muted); margin-bottom: 16px;">
          Kliknij komendƒô aby skopiowaƒá do schowka. <span id="cmdCount" style="color:var(--accent-primary);"></span>
        </p>
        <div id="commandsList"></div>
      </div>

      <!-- API KEYS VAULT -->
      <div class="glass" style="border-top:2px solid var(--accent-gold);">
        <div class="panel-header">
          <h2 class="panel-title">üîë API Keys Vault</h2>
          <div style="display:flex; gap:6px;">
            <button class="btn" onclick="exportKeys()">üì§ Eksport</button>
            <button class="btn" onclick="importKeys()">üì• Import</button>
          </div>
        </div>
        <p style="font:11px/1.5 var(--sans); color:var(--text-muted); margin-bottom:16px;">Klucze sƒÖ przechowywane <strong style="color:var(--accent-warning);">tylko w localStorage</strong> tego urzƒÖdzenia. Nie sƒÖ nigdzie wysy≈Çane. Kliknij üëÅÔ∏è aby odkryƒá klucz.</p>

        <!-- Add new key -->
        <div style="display:flex; gap:6px; margin-bottom:16px; flex-wrap:wrap;">
          <select id="keyProvider" style="padding:8px 12px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--sans); outline:none; min-width:150px;">
            <option value="">‚Äî Provider ‚Äî</option>
          </select>
          <input type="text" id="keyLabel" placeholder="Etykieta (np. produkcja, dev)" style="padding:8px 12px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--mono); outline:none; flex:1; min-width:140px;">
          <input type="password" id="keyValue" placeholder="sk-... / key-... / gsk_..." style="padding:8px 12px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--mono); outline:none; flex:2; min-width:200px;">
          <button class="btn btn-primary" onclick="addApiKey()">‚ûï Dodaj</button>
        </div>

        <!-- Keys list -->
        <div id="apiKeysList"></div>
      </div>

      <!-- API Key Tester -->
      <div class="glass" style="border-top:2px solid var(--accent-success);">
        <div class="panel-header">
          <h2 class="panel-title">üß™ API Key Tester</h2>
          <span style="font:10px var(--mono); color:var(--text-muted);">Testuj klucze bezpo≈õrednio z przeglƒÖdarki</span>
        </div>
        <p style="font:11px/1.5 var(--sans); color:var(--text-muted); margin-bottom:16px;">Wybierz provider i wklej klucz. Test wykonuje minimalny request do API providera. <strong style="color:var(--accent-warning);">CORS uwaga:</strong> niekt√≥re API blokujƒÖ requesty z przeglƒÖdarki ‚Äî wtedy u≈ºyj testu z terminala (komenda skopiowana do schowka).</p>

        <div style="display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap;">
          <select id="testProvider" onchange="updateTestInfo()" style="padding:10px 14px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--sans); outline:none; min-width:160px;"></select>
          <input type="password" id="testKey" placeholder="Wklej klucz API do testu..." style="padding:10px 14px; background:var(--bg-secondary); border:1px solid var(--border); color:var(--text-primary); font:12px var(--mono); outline:none; flex:1; min-width:250px;">
          <button class="btn btn-primary" onclick="testApiKey()" id="testBtn">üß™ Testuj</button>
          <button class="btn" onclick="copyCurlTest()" title="Skopiuj komendƒô curl do schowka">üìã curl</button>
        </div>
        <div id="testInfo" style="font:11px/1.5 var(--sans); color:var(--text-muted); margin-bottom:8px;"></div>
        <div id="testResult" style="display:none;"></div>

        <!-- Quick reference -->
        <div style="margin-top:16px; padding-top:12px; border-top:1px solid var(--border);">
          <div class="section-label">üìñ Gdzie znale≈∫ƒá klucze API</div>
          <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:6px;" id="apiDocsLinks"></div>
        </div>
      </div>

      <!-- BUDGET & FINANCE SUMMARY + CMD instructions -->
      <div class="glass" style="border-top:2px solid var(--accent-primary);">
        <div class="panel-header">
          <h2 class="panel-title">üí∞ Bud≈ºet & Finanse ‚Äî Podsumowanie</h2>
        </div>

        <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:12px; margin-bottom:20px;">
          <div style="padding:14px; background:rgba(0,217,255,0.05); border:1px solid var(--accent-primary); border-radius:6px; text-align:center;">
            <div style="font:600 10px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; letter-spacing:.1em; margin-bottom:6px;">AI Models</div>
            <div class="budget-ai" style="font:700 24px var(--sans); color:var(--accent-primary);">$300</div>
            <div style="font:10px var(--sans); color:var(--text-muted);">OpenAI, Claude, DeepSeek, Gemini, Groq, xAI</div>
          </div>
          <div style="padding:14px; background:rgba(251,191,36,0.05); border:1px solid var(--accent-gold); border-radius:6px; text-align:center;">
            <div style="font:600 10px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; letter-spacing:.1em; margin-bottom:6px;">Cloudflare</div>
            <div class="budget-cf" style="font:700 24px var(--sans); color:var(--accent-gold);">$100</div>
            <div style="font:10px var(--sans); color:var(--text-muted);">Workers, D1, R2, KV, Hyperdrive</div>
          </div>
          <div style="padding:14px; background:rgba(16,185,129,0.05); border:1px solid var(--accent-success); border-radius:6px; text-align:center;">
            <div style="font:600 10px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; letter-spacing:.1em; margin-bottom:6px;">Buffer</div>
            <div class="budget-buffer" style="font:700 24px var(--sans); color:var(--accent-success);">$100</div>
            <div style="font:10px var(--sans); color:var(--text-muted);">Zapas na nieprzewidziane koszty</div>
          </div>
          <div style="padding:14px; background:rgba(124,58,237,0.08); border:2px solid var(--accent-secondary); border-radius:6px; text-align:center;">
            <div style="font:600 10px/1 var(--mono); color:var(--text-muted); text-transform:uppercase; letter-spacing:.1em; margin-bottom:6px;">TOTAL / miesiƒÖc</div>
            <div class="budget-total" style="font:700 28px var(--sans); color:var(--accent-secondary);">$500</div>
            <div style="font:10px var(--sans); color:var(--text-muted);">AI + CF + Buffer = Total</div>
          </div>
        </div>

        <div style="padding:14px; background:var(--bg-secondary); border:1px solid var(--border); border-radius:6px; margin-bottom:16px;">
          <div class="section-label" style="margin-bottom:8px;">üìã Najwa≈ºniejsze zasady bud≈ºetowe</div>
          <ul style="font:12px/1.8 var(--sans); color:var(--text-secondary); list-style:disc; padding-left:20px; margin:0;">
            <li><strong style="color:var(--accent-primary);">AI $300:</strong> Podzielone na: OpenAI (~$100), Anthropic Claude (~$100), DeepSeek/Gemini/inne (~$100)</li>
            <li><strong style="color:var(--accent-gold);">CF $100:</strong> Workers ($18) + D1 ($8) + R2 ($0.60) + KV ($1.50) + Hyperdrive ($5) = ~$33 | reszta to zapas na scale</li>
            <li><strong style="color:var(--accent-success);">Buffer $100:</strong> Na spikes (du≈ºy ruch), nowe API do test√≥w, emergency costs</li>
            <li><strong>Przekroczenie?</strong> Alerty przy 80% i 100% zu≈ºycia ‚Äî sprawdzaj dashboardy provider√≥w</li>
            <li><strong>Oszczƒôdno≈õci:</strong> U≈ºywaj DeepSeek/Gemini Flash zamiast GPT-4o/Claude do prostych task√≥w</li>
            <li><strong>Rozliczenia:</strong> Ka≈ºdy provider fakturuje osobno ‚Äî sprawdzaj co miesiƒÖc: OpenAI billing, Anthropic console, CF dashboard</li>
          </ul>
        </div>

        <div style="padding:14px; background:var(--bg-secondary); border:1px solid var(--accent-primary); border-radius:6px;">
          <div class="section-label" style="margin-bottom:8px;">üñ•Ô∏è Jak zmieniƒá bud≈ºet z konsoli / CMD</div>
          <p style="font:11px/1.5 var(--sans); color:var(--text-muted); margin-bottom:12px;">Bud≈ºet zapisany jest w <code style="color:var(--accent-primary);">localStorage</code> przeglƒÖdarki pod kluczem <code style="color:var(--accent-primary);">kgt_budget</code>. Mo≈ºesz go zmieniƒá:</p>
          <div style="font:11px/2 var(--mono); color:var(--accent-primary);">
            <div style="margin-bottom:4px; color:var(--text-muted);">// 1. Otw√≥rz DevTools w przeglƒÖdarce (F12) ‚Üí Console i wpisz:</div>
            <div class="cmd-item" onclick="navigator.clipboard.writeText(this.innerText)" style="cursor:pointer; padding:4px 8px; background:var(--bg-primary); margin-bottom:2px; border-radius:3px;">localStorage.getItem('kgt_budget')</div>
            <div style="margin-bottom:4px; margin-top:8px; color:var(--text-muted);">// 2. Zmie≈Ñ warto≈õci (AI, CF, Buffer ‚Äî total liczy siƒô auto):</div>
            <div class="cmd-item" onclick="navigator.clipboard.writeText(this.innerText)" style="cursor:pointer; padding:4px 8px; background:var(--bg-primary); margin-bottom:2px; border-radius:3px;">localStorage.setItem('kgt_budget', JSON.stringify({ai:300,cf:100,buffer:100,total:500}))</div>
            <div style="margin-bottom:4px; margin-top:8px; color:var(--text-muted);">// 3. Prze≈Çaduj stronƒô:</div>
            <div class="cmd-item" onclick="navigator.clipboard.writeText(this.innerText)" style="cursor:pointer; padding:4px 8px; background:var(--bg-primary); margin-bottom:2px; border-radius:3px;">location.reload()</div>
            <div style="margin-bottom:4px; margin-top:12px; color:var(--text-muted);">// Lub jednolinijkowiec ‚Äî zmie≈Ñ kwoty i wklej:</div>
            <div class="cmd-item" onclick="navigator.clipboard.writeText(this.innerText)" style="cursor:pointer; padding:4px 8px; background:var(--bg-primary); margin-bottom:2px; border-radius:3px;">localStorage.setItem('kgt_budget',JSON.stringify({ai:400,cf:50,buffer:50,total:500})); location.reload()</div>
            <div style="margin-top:12px; color:var(--text-muted);">// Przyk≈Çady zmian:</div>
            <div class="cmd-item" onclick="navigator.clipboard.writeText(this.innerText)" style="cursor:pointer; padding:4px 8px; background:var(--bg-primary); margin-bottom:2px; border-radius:3px;">localStorage.setItem('kgt_budget',JSON.stringify({ai:200,cf:100,buffer:200,total:500})); location.reload()</div>
            <div class="cmd-item" onclick="navigator.clipboard.writeText(this.innerText)" style="cursor:pointer; padding:4px 8px; background:var(--bg-primary); margin-bottom:2px; border-radius:3px;">localStorage.setItem('kgt_budget',JSON.stringify({ai:500,cf:0,buffer:0,total:500})); location.reload()</div>
            <div style="margin-top:12px; color:var(--text-muted);">// Reset do domy≈õlnych:</div>
            <div class="cmd-item" onclick="navigator.clipboard.writeText(this.innerText)" style="cursor:pointer; padding:4px 8px; background:var(--bg-primary); margin-bottom:2px; border-radius:3px;">localStorage.removeItem('kgt_budget'); location.reload()</div>
          </div>
          <p style="font:10px/1.5 var(--sans); color:var(--text-muted); margin-top:12px;">üí° Kliknij komendƒô ‚Üí kopia do schowka. Wklej w konsoli przeglƒÖdarki (F12 ‚Üí Console).</p>
        </div>
      </div>
    </section>

    <!-- ============================== NOTES ============================== -->
    <section id="notes-section" class="section">
      <div class="glass">
        <div class="panel-header"><h2 class="panel-title">üìù Project Notes</h2><span style="font:11px var(--mono); color:var(--text-muted);">Session: <span id="sessionTime">0 min</span></span></div>
        <textarea class="notes-textarea" id="notesEditor" placeholder="# Notatki projektowe&#10;&#10;- Za≈Ço≈ºenia&#10;- Decyzje&#10;- Ryzyka&#10;- Nastƒôpne kroki"></textarea>
        <div class="panel-actions">
          <button class="btn btn-primary" onclick="saveNotes()">üíæ Zapisz</button>
          <button class="btn" onclick="exportNotes()">üìã Eksport</button>
          <button class="btn" onclick="clearNotes()">üóëÔ∏è Wyczy≈õƒá</button>
        </div>
      </div>
    </section>

  </main>

  <!-- Toast -->
  <div class="toast" id="toast">
    <span style="color:var(--accent-success); font-size:18px;">‚úÖ</span>
    <div>
      <div class="toast-title" id="toastTitle">OK</div>
      <div class="toast-message" id="toastMessage"></div>
    </div>
  </div>

  <!-- ============================= SCRIPT ============================= -->
  <script>
  // ============= DATA =============

  const MODELS = [
    { name: "DeepSeek R1 8B", role: "SEO Optimization", provider: "deepseek", input: 0.55, output: 2.19, cache: 0.14, context: "64K", maxTokens: 8192, status: "active", tier: "cheap", priority: 1 },
    { name: "Claude Sonnet 4", role: "Technical Accuracy", provider: "anthropic", input: 3.00, output: 15.00, cache: 0.30, context: "200K", maxTokens: 16384, status: "active", tier: "premium", priority: 2 },
    { name: "GPT-4o", role: "Marketing Copy", provider: "openai", input: 2.50, output: 10.00, cache: 1.25, context: "128K", maxTokens: 16384, status: "active", tier: "mid", priority: 3 },
    { name: "Qwen 2.5 14B", role: "Backup Writer", provider: "ollama (local)", input: 0.20, output: 0.60, cache: 0.00, context: "32K", maxTokens: 8192, status: "standby", tier: "local", priority: 4 },
    { name: "Gemini 2.0 Flash", role: "Critic Agent", provider: "google", input: 0.10, output: 0.40, cache: null, context: "1M", maxTokens: 8192, status: "active", tier: "cheap", priority: 5 },
    { name: "Claude Sonnet 4.5", role: "Content Aggregation", provider: "anthropic", input: 3.00, output: 15.00, cache: null, context: "200K", maxTokens: 16384, status: "active", tier: "premium", priority: 6 },
    { name: "Bielik 7B", role: "Polish Language", provider: "speakleash", input: 0.00, output: 0.00, cache: null, context: "‚Äî", maxTokens: null, status: "available", tier: "free" },
    { name: "text-embedding-3-small", role: "Vector Embeddings", provider: "openai", input: 0.02, output: null, cache: null, context: "‚Äî", maxTokens: null, status: "active", tier: "cheap" }
  ];

  const OPENCLAW_MODELS = [
    { provider: "Anthropic", name: "Opus 4.6", id: "anthropic/claude-opus-4-6", status: "active" },
    { provider: "Kimi-Coding", name: "Kimi K2.5", id: "kimi-coding/k2p5", status: "available" },
    { provider: "Google", name: "Gemini 3 Flash", id: "google/gemini-3-flash-preview", status: "available" },
    { provider: "Google", name: "Gemini Pro", id: "google/gemini-2.5-pro", status: "available" },
    { provider: "Xai", name: "Grok 4", id: "xai/grok-4", status: "available" },
    { provider: "Xai", name: "Grok 4 Fast", id: "xai/grok-4-fast", status: "available" },
    { provider: "Openai-Codex", name: "GPT 5.3 Codex", id: "openai-codex/gpt-5.3-codex", status: "available" },
    { provider: "Openai", name: "GPT-5.2", id: "openai/gpt-5.2", status: "available" },
    { provider: "Zai", name: "GLM-5", id: "zai/glm-5", status: "available" },
    { provider: "Minimax", name: "MiniMax M2.5", id: "minimax/MiniMax-M2.5", status: "available" }
  ];

  // ============= AI LIBRARY ‚Äî EXPERT MODELS =============
  const EXPERT_MODELS = [
    // Speech-to-Text
    { name: "Whisper Large V3", cat: "stt", provider: "OpenAI", price: "$0.006", unit: "per 60s", spec: "Najlepsza jako≈õƒá STT, 99 jƒôzyk√≥w, timestamps", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Nova-3", cat: "stt", provider: "Deepgram", price: "$0.0052", unit: "per 60s", spec: "Najszybsza STT, real-time streaming, diarization", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Chirp Universal", cat: "stt", provider: "Google", price: "$0.024", unit: "per 60s", spec: "300+ wariant√≥w jƒôzykowych, medical/phone models", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Azure Speech", cat: "stt", provider: "Microsoft", price: "$0.017", unit: "per 60s", spec: "Custom models, real-time + batch, pronunciation", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Transcribe", cat: "stt", provider: "Amazon", price: "$0.024", unit: "per 60s", spec: "Medical transcription, call analytics, streaming", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Gladia", cat: "stt", provider: "Gladia", price: "$0.010", unit: "per 60s", spec: "Audio intelligence, summary + sentiment + chapters", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "AssemblyAI Universal-2", cat: "stt", provider: "AssemblyAI", price: "$0.012", unit: "per 60s", spec: "LeMUR (LLM na transkrypcie), PII redaction, speakers", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },

    // Text-to-Speech
    { name: "Eleven Multilingual V2", cat: "tts", provider: "ElevenLabs", price: "$0.30", unit: "per 1K chars", spec: "Ultra-realistyczne g≈Çosy, voice cloning, 29 jƒôzyk√≥w", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Play3.0-mini", cat: "tts", provider: "PlayHT", price: "$0.08", unit: "per 1K chars", spec: "Ultra-low latency, emotion control, streaming", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "XTTS-v2", cat: "tts", provider: "Coqui", price: "Free/OSS", unit: "‚Äî", spec: "Open source, voice cloning z 6s pr√≥bki, 17 jƒôzyk√≥w", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Azure Neural TTS", cat: "tts", provider: "Microsoft", price: "$0.016", unit: "per 1K chars", spec: "400+ g≈Ços√≥w, SSML control, Custom Neural Voice", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Polly Neural", cat: "tts", provider: "Amazon", price: "$0.016", unit: "per 1K chars", spec: "Newscaster style, NTTS, 60+ g≈Ços√≥w", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Bark", cat: "tts", provider: "Suno (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Generative audio ‚Äî ≈õmiech, muzyka, efekty w tek≈õcie", quality: "‚≠ê‚≠ê‚≠ê" },

    // Vision / OCR
    { name: "GPT-4o Vision", cat: "vision", provider: "OpenAI", price: "$2.50", unit: "per 1M tokens", spec: "Najlepsze rozumienie obraz√≥w, charts, documents", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Claude 3.5 Vision", cat: "vision", provider: "Anthropic", price: "$3.00", unit: "per 1M tokens", spec: "Doskona≈Çy OCR, charts, diagramy, screenshots", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Document AI", cat: "vision", provider: "Google", price: "$0.065", unit: "per page", spec: "Ekstrakcja tabel, formularzy, faktur, paragon√≥w", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Textract", cat: "vision", provider: "Amazon", price: "$0.015", unit: "per page", spec: "OCR, tabele, identity docs, expense analysis", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "PaddleOCR", cat: "vision", provider: "PaddlePaddle (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Multilingual OCR, table recognition, layout analysis", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Surya", cat: "vision", provider: "VikParuchuri (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "OCR 90+ jƒôzyk√≥w, table detection, reading order", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },

    // Image Generation
    { name: "FLUX.1 Pro", cat: "image", provider: "Black Forest Labs", price: "$0.05", unit: "per image", spec: "Najlepsza jako≈õƒá, photorealizm, 6-step generation", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "DALL¬∑E 3 HD", cat: "image", provider: "OpenAI", price: "$0.08", unit: "per image", spec: "Prompt adherence, text rendering w obrazach", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Stable Diffusion 3.5", cat: "image", provider: "Stability AI", price: "$0.03", unit: "per image", spec: "Open weights, ControlNet, LoRA, inpainting", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Midjourney V6.1", cat: "image", provider: "Midjourney", price: "$0.05", unit: "per image", spec: "Artystyczny styl, coherent compositions, upscale", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Ideogram 2.0", cat: "image", provider: "Ideogram", price: "$0.04", unit: "per image", spec: "Najlepszy text-in-image, logo generation, design", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Recraft V3", cat: "image", provider: "Recraft", price: "$0.04", unit: "per image", spec: "Vector SVG generation, brand-style graphics", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Leonardo Phoenix", cat: "image", provider: "Leonardo.Ai", price: "$0.02", unit: "per image", spec: "Game assets, character design, consistent styles", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },

    // Video Generation
    { name: "Sora", cat: "video", provider: "OpenAI", price: "$0.40", unit: "per 5s clip", spec: "Fizycznie realistyczne wideo, camera control", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Kling 1.6", cat: "video", provider: "Kuaishou", price: "$0.20", unit: "per 5s clip", spec: "Motion brush, lip sync, face swap, 1080p", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Runway Gen-3 Alpha", cat: "video", provider: "Runway", price: "$0.25", unit: "per 5s clip", spec: "Motion control, first/last frame, temporal coherence", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Luma Dream Machine", cat: "video", provider: "Luma AI", price: "$0.15", unit: "per 5s clip", spec: "Text/image-to-video, keyframe interpolation", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Pika 2.0", cat: "video", provider: "Pika Labs", price: "$0.10", unit: "per 4s clip", spec: "Scene ingredients, style transfer, pikaffects", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Veo 2", cat: "video", provider: "Google DeepMind", price: "$0.30", unit: "per 5s clip", spec: "4K output, cinematic camera, 8s clips, SynthID watermark", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },

    // Music & Audio
    { name: "Udio v2", cat: "music", provider: "Udio", price: "$0.05", unit: "per track", spec: "Pe≈Çne piosenki 3min+, lyrics, 50+ gatunk√≥w", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Suno V4", cat: "music", provider: "Suno", price: "$0.05", unit: "per track", spec: "Text-to-music, custom vocals, covers, remix", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "MusicGen Large", cat: "music", provider: "Meta (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Text/melody-to-music, 32kHz, stereo, 30s", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Stable Audio 2.0", cat: "music", provider: "Stability AI", price: "$0.02", unit: "per 45s", spec: "Music + sound effects, 44.1kHz stereo, 3min", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "AudioCraft (Encodec)", cat: "music", provider: "Meta (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Audio compression + generation + enhancement", quality: "‚≠ê‚≠ê‚≠ê" },

    // NLP / Translation
    { name: "DeepL Pro", cat: "nlp", provider: "DeepL", price: "$25", unit: "per 1M chars", spec: "Najlepsza jako≈õƒá t≈Çumacze≈Ñ, 33 jƒôzyki, glossary", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "NLLB-200", cat: "nlp", provider: "Meta (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "200 jƒôzyk√≥w, low-resource languages, 54B params", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Sapling", cat: "nlp", provider: "Sapling AI", price: "$0.001", unit: "per suggestion", spec: "Grammar/spelling/style, customer support augmentation", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Comprehend", cat: "nlp", provider: "Amazon", price: "$0.001", unit: "per unit", spec: "Sentiment, entities, key phrases, PII detection", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Text Analytics", cat: "nlp", provider: "Microsoft", price: "$0.001", unit: "per record", spec: "Sentiment, NER, key phrases, language detection, health NLP", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "spaCy v3", cat: "nlp", provider: "Explosion (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "NER, POS, dependency parsing, 75+ jƒôzyk√≥w, fastest NLP", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },

    // Embeddings
    { name: "text-embedding-3-large", cat: "embed", provider: "OpenAI", price: "$0.13", unit: "per 1M tokens", spec: "3072 dims, shortening, najlepsza jako≈õƒá retrievalu", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Voyage-3-large", cat: "embed", provider: "Voyage AI", price: "$0.18", unit: "per 1M tokens", spec: "Code + text embeddings, superior retrieval, 32K context", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Cohere Embed v3", cat: "embed", provider: "Cohere", price: "$0.10", unit: "per 1M tokens", spec: "Multilingual 100+, compression, int8/binary modes", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Jina Embeddings V3", cat: "embed", provider: "Jina AI", price: "$0.02", unit: "per 1M tokens", spec: "8K context, task-specific LoRA, multilingual, matryoshka", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "BGE M3", cat: "embed", provider: "BAAI (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Dense+sparse+colbert, multi-lingual, multi-granularity", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Nomic Embed V2", cat: "embed", provider: "Nomic (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Open weights, 8K context, Matryoshka, multimodal", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },

    // Safety / Moderation
    { name: "Omni Moderation", cat: "safety", provider: "OpenAI", price: "Free", unit: "‚Äî", spec: "Text + image safety: hate, violence, self-harm, sexual", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Llama Guard 3", cat: "safety", provider: "Meta (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Input/output guardrails, 13 harm categories, multilingual", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Perspective API", cat: "safety", provider: "Google/Jigsaw", price: "Free (QPS)", unit: "‚Äî", spec: "Toxicity, threat, insult, profanity scoring", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Azure Content Safety", cat: "safety", provider: "Microsoft", price: "$1.00", unit: "per 1K images", spec: "Text + image, severity levels, custom blocklists", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "NeMo Guardrails", cat: "safety", provider: "NVIDIA (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Programmable guardrails, topic control, jailbreak prevention", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },

    // Multimodal
    { name: "GPT-4o", cat: "multi", provider: "OpenAI", price: "$2.50/$10", unit: "in/out per 1M", spec: "Text+Vision+Audio native, tool use, JSON mode", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Gemini 2.0 Flash", cat: "multi", provider: "Google", price: "$0.10/$0.40", unit: "in/out per 1M", spec: "1M context, native multimodal, grounding, code exec", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Claude Sonnet 4", cat: "multi", provider: "Anthropic", price: "$3/$15", unit: "in/out per 1M", spec: "Vision, PDF parsing, extended thinking, tool use, code", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Pixtral Large", cat: "multi", provider: "Mistral", price: "$2/$6", unit: "in/out per 1M", spec: "128K context, 123B params, superior chart/doc understanding", quality: "‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "InternVL2.5 78B", cat: "multi", provider: "Shanghai AI Lab (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Open SOTA multimodal, video understanding, OCR, math", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" },
    { name: "Qwen2.5-VL 72B", cat: "multi", provider: "Alibaba (OSS)", price: "Free/OSS", unit: "‚Äî", spec: "Video 20min+, agent GUI control, document parsing, multilingual", quality: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê" }
  ];

  // ============= AI TOOLS & PLATFORMS =============
  const AI_TOOLS = [
    { name: "Eden AI", icon: "üß¨", url: "https://www.edenai.co", cat: "Agregator API", desc: "507 modeli, 52 provider√≥w. Unified API do STT, TTS, OCR, NLP, Image, Video. Expert Models marketplace.", tags: ["unified-api","marketplace","expert-models"] },
    { name: "Replicate", icon: "üîÑ", url: "https://replicate.com", cat: "Model Hosting", desc: "Run any ML model via API. Serverless GPU. 50K+ publicznych modeli. Pay per second.", tags: ["serverless","gpu","open-source"] },
    { name: "Hugging Face", icon: "ü§ó", url: "https://huggingface.co", cat: "Hub & Inference", desc: "1M+ modeli, 200K+ dataset√≥w. Spaces (demo), Inference API, Transformers library.", tags: ["hub","open-source","community"] },
    { name: "RunPod", icon: "üöÄ", url: "https://www.runpod.io", cat: "GPU Cloud", desc: "Tanie GPU (A100 od $1.64/h, H100 od $3.29/h). Serverless endpoints. Vllm templates.", tags: ["gpu","serverless","cheap"] },
    { name: "Together AI", icon: "ü§ù", url: "https://www.together.ai", cat: "Inference API", desc: "Najszybszy inference open-source modeli. Llama, Mixtral, SDXL, embeddings. $0.20/M tokens.", tags: ["fast-inference","open-source","cheap"] },
    { name: "Groq", icon: "‚ö°", url: "https://groq.com", cat: "Inference (LPU)", desc: "Najszybszy inference na ≈õwiecie ‚Äî LPU hardware. Llama 70B w 300 tok/s. Free tier.", tags: ["ultra-fast","free-tier","hardware"] },
    { name: "Fireworks AI", icon: "üéÜ", url: "https://fireworks.ai", cat: "Inference API", desc: "Fastest open model API. Function calling, JSON mode, compound AI. Enterprise grade.", tags: ["fast","enterprise","compound-ai"] },
    { name: "Perplexity", icon: "üîç", url: "https://www.perplexity.ai", cat: "AI Search", desc: "AI-powered search z cytatami. Sonar API do programmatic search. Real-time web data.", tags: ["search","citations","real-time"] },
    { name: "LangChain", icon: "ü¶ú", url: "https://www.langchain.com", cat: "Framework", desc: "Framework do budowy AI apps. Chains, agents, RAG. LangSmith monitoring. LangGraph multi-agent.", tags: ["framework","agents","rag"] },
    { name: "LlamaIndex", icon: "ü¶ô", url: "https://www.llamaindex.ai", cat: "Data Framework", desc: "Framework do RAG i data agents. 160+ connectors. LlamaParse (PDF), LlamaCloud.", tags: ["rag","data","connectors"] },
    { name: "Weights & Biases", icon: "üìä", url: "https://wandb.ai", cat: "MLOps", desc: "Experiment tracking, model registry, dataset versioning. The MLOps platform.", tags: ["mlops","tracking","experiments"] },
    { name: "Vercel AI SDK", icon: "‚ñ≤", url: "https://sdk.vercel.ai", cat: "SDK / Framework", desc: "TypeScript toolkit do AI apps. Streaming, tools, multi-provider. React/Next/Svelte hooks.", tags: ["typescript","streaming","frontend"] },
    { name: "CrewAI", icon: "üë•", url: "https://www.crewai.com", cat: "Multi-Agent", desc: "Multi-agent orchestration. Role-based AI agents. Tasks, tools, memory, delegation.", tags: ["multi-agent","orchestration","roles"] },
    { name: "AutoGen", icon: "ü§ñ", url: "https://microsoft.github.io/autogen/", cat: "Multi-Agent", desc: "Microsoft multi-agent framework. Konwersacyjne agenty, kod exec, group chat.", tags: ["multi-agent","microsoft","conversation"] },
    { name: "Ollama", icon: "ü¶ô", url: "https://ollama.com", cat: "Local LLM", desc: "Uruchom LLM lokalnie. Llama, Mistral, Phi, CodeLlama. macOS/Linux/Windows. Free.", tags: ["local","free","offline"] },
    { name: "LM Studio", icon: "üñ•Ô∏è", url: "https://lmstudio.ai", cat: "Local LLM", desc: "Desktop app do lokalnych LLM√≥w. GGUF models, chat UI, local server, GPU acceleration.", tags: ["local","desktop","gui"] },
    { name: "Unsloth", icon: "ü¶•", url: "https://unsloth.ai", cat: "Fine-tuning", desc: "2x szybszy fine-tuning, 60% mniej VRAM. LoRA/QLoRA. Llama, Mistral, Phi, Gemma.", tags: ["fine-tuning","efficient","lora"] },
    { name: "Modal", icon: "üì¶", url: "https://modal.com", cat: "Serverless GPU", desc: "Serverless cloud functions z GPU. Python-native. Cold start <1s. Batch, cron, web.", tags: ["serverless","gpu","python"] },
    { name: "Pinecone", icon: "üå≤", url: "https://www.pinecone.io", cat: "Vector DB", desc: "Managed vector database. Serverless, hybrid search, namespaces, metadata filtering.", tags: ["vector-db","managed","search"] },
    { name: "Weaviate", icon: "üîÆ", url: "https://weaviate.io", cat: "Vector DB", desc: "Open-source vector DB. Hybrid search, multi-tenancy, generative search, modules.", tags: ["vector-db","open-source","hybrid"] },
    { name: "n8n", icon: "üîó", url: "https://n8n.io", cat: "AI Automation", desc: "Low-code workflow automation z AI nodes. 400+ integracji. Self-hosted. AI agents.", tags: ["automation","low-code","workflows"] },
    { name: "Dify", icon: "üéØ", url: "https://dify.ai", cat: "AI App Builder", desc: "Open-source LLM app development. Visual workflow, RAG pipeline, agent, prompt IDE.", tags: ["app-builder","open-source","visual"] },
    { name: "Helicone", icon: "‚òÄÔ∏è", url: "https://helicone.ai", cat: "Observability", desc: "LLM observability. Logging, caching, rate limiting, prompt management. 1-line SDK.", tags: ["observability","logging","caching"] },
    { name: "PromptLayer", icon: "üìù", url: "https://promptlayer.com", cat: "Prompt Management", desc: "Prompt versioning, A/B testing, analytics. Template registry. Collaboration.", tags: ["prompts","versioning","analytics"] }
  ];

  // ============= AI PROVIDERS MAP =============
  const AI_PROVIDERS = [
    { name: "OpenAI", icon: "üü¢", url: "https://openai.com", spec: ["LLM (GPT-4o, o3)", "Image (DALL¬∑E 3)", "STT (Whisper)", "TTS", "Embeddings", "Moderation", "Fine-tuning"], strength: "Najszerszy ekosystem, best-in-class multi-modal, enterprise-ready", pricing: "Pay-per-token, $5-200/mln tokens", color: "#10b981" },
    { name: "Anthropic", icon: "üü£", url: "https://anthropic.com", spec: ["LLM (Claude 4 family)", "Vision", "Tool use", "Extended thinking", "Computer use"], strength: "Najlepszy reasoning i coding, 200K context, safety-focused", pricing: "$3-15/mln tokens", color: "#7c3aed" },
    { name: "Google DeepMind", icon: "üîµ", url: "https://deepmind.google", spec: ["LLM (Gemini)", "Vision", "Video (Veo 2)", "Image (Imagen 3)", "Audio", "Code", "Science (AlphaFold)"], strength: "1M context, grounding w Search, multimodal native, najta≈Ñszy premium", pricing: "$0.10-7/mln tokens", color: "#3b82f6" },
    { name: "Meta AI", icon: "üî∑", url: "https://ai.meta.com", spec: ["LLM (Llama 3.1)", "Vision (SAM 2)", "Audio (MusicGen)", "Embeddings (NLLB)", "Safety (Llama Guard)"], strength: "Open-source leader, foundation models for community", pricing: "Free / OSS", color: "#0284c7" },
    { name: "Mistral AI", icon: "üü†", url: "https://mistral.ai", spec: ["LLM (Mistral Large)", "Code (Codestral)", "Vision (Pixtral)", "Embeddings"], strength: "European AI leader, najlepszy stosunek jako≈õƒá/cena, function calling", pricing: "$0.10-2/mln tokens", color: "#f97316" },
    { name: "DeepSeek", icon: "üê≥", url: "https://deepseek.com", spec: ["LLM (DeepSeek V3)", "Reasoning (R1)", "Code (Coder V3)", "Math"], strength: "State-of-art za 10x mniej. Open weights. MoE architecture.", pricing: "$0.14-2.19/mln tokens", color: "#06b6d4" },
    { name: "xAI", icon: "‚ö°", url: "https://x.ai", spec: ["LLM (Grok 3)", "Vision", "Real-time data (X/Twitter)"], strength: "Real-time knowledge, humor/personality, du≈ºy context", pricing: "$2-10/mln tokens", color: "#eab308" },
    { name: "Cohere", icon: "üü§", url: "https://cohere.com", spec: ["LLM (Command R+)", "Embeddings (v3)", "Rerank", "RAG", "Classify"], strength: "Enterprise NLP/RAG specialist, multilingual embeddings, rerank", pricing: "$0.10-15/mln tokens", color: "#a16207" },
    { name: "Stability AI", icon: "üé®", url: "https://stability.ai", spec: ["Image (SD 3.5, SDXL)", "Video (Stable Video)", "Audio (Stable Audio)", "3D", "Language"], strength: "Open-source generative media, ControlNet ecosystem", pricing: "$0.02-0.05/image", color: "#ec4899" },
    { name: "ElevenLabs", icon: "üéôÔ∏è", url: "https://elevenlabs.io", spec: ["TTS (Multilingual V2)", "Voice cloning", "Sound effects", "Dubbing", "Voice agents"], strength: "Best-in-class TTS, najrealistyczniejsze g≈Çosy, voice design", pricing: "$0.18-0.30/1K chars", color: "#6366f1" },
    { name: "Deepgram", icon: "üé§", url: "https://deepgram.com", spec: ["STT (Nova-3)", "TTS (Aura)", "Audio intelligence", "Diarization"], strength: "Najszybsza STT, real-time streaming, enterprise accuracy", pricing: "$0.0043-0.0145/min", color: "#14b8a6" },
    { name: "Runway", icon: "üé¨", url: "https://runway.ml", spec: ["Video (Gen-3 Alpha)", "Image-to-video", "Motion brush", "Inpainting", "Green screen"], strength: "Pioneer AI video, best motion control, creative tools", pricing: "$0.05/s video", color: "#f43f5e" },
    { name: "Black Forest Labs", icon: "üå≤", url: "https://blackforestlabs.ai", spec: ["Image (FLUX.1 Pro/Dev/Schnell)", "ControlNet", "Inpainting", "Redux"], strength: "Najlepszy open-source image gen, ex-Stability team, photorealism", pricing: "$0.03-0.05/image", color: "#22c55e" },
    { name: "NVIDIA", icon: "üíö", url: "https://www.nvidia.com/ai", spec: ["Inference (TensorRT)", "NeMo (training)", "Guardrails", "BioNeMo", "Omniverse", "CUDA"], strength: "AI hardware & software stack, enterprise AI platform", pricing: "Hardware + NIM API", color: "#84cc16" },
    { name: "Hugging Face", icon: "ü§ó", url: "https://huggingface.co", spec: ["Model Hub (1M+)", "Datasets (200K+)", "Spaces", "Inference API", "Transformers", "Tokenizers"], strength: "The GitHub of ML ‚Äî open-source hub, community, tools", pricing: "Free + Pro $9/mo", color: "#fbbf24" }
  ];

  // ============= AI USE CASES =============
  const AI_USE_CASES = [
    { task: "Transkrypcja rozm√≥w", best: "Deepgram Nova-3", alt: "Whisper Large V3", why: "Najszybciej + speaker diarization. Whisper = najlepsza jako≈õƒá offline." },
    { task: "Synteza mowy (voiceover)", best: "ElevenLabs V2", alt: "Azure Neural TTS", why: "Najrealistyczniejsze g≈Çosy. Azure = ta≈Ñszy dla du≈ºych wolumen√≥w." },
    { task: "Generowanie obraz√≥w", best: "FLUX.1 Pro", alt: "Midjourney V6.1", why: "Najlepszy photorealizm. Midjourney = artystyczny styl." },
    { task: "Generowanie wideo", best: "Runway Gen-3 Alpha", alt: "Veo 2", why: "Najlepsza motion control. Veo = 4K + d≈Çu≈ºsze klipy." },
    { task: "OCR / dokumenty", best: "Google Document AI", alt: "Claude 3.5 Vision", why: "Document AI = structured extraction. Claude = flexible understanding." },
    { task: "T≈Çumaczenia", best: "DeepL Pro", alt: "NLLB-200 (free)", why: "DeepL = best quality. NLLB = 200 jƒôzyk√≥w, free, local." },
    { task: "Tworzenie muzyki", best: "Suno V4", alt: "Udio v2", why: "Suno = pe≈Çne piosenki z wokalem. Udio = lepsza jako≈õƒá instrumentalna." },
    { task: "Embeddings (RAG)", best: "text-embedding-3-large", alt: "Cohere Embed v3", why: "OpenAI = najlepszy retrieval. Cohere = multilingual champion." },
    { task: "Content moderation", best: "OpenAI Moderation", alt: "Llama Guard 3", why: "OpenAI = free + multi-modal. Guard = self-hosted, customizable." },
    { task: "Local LLM (offline)", best: "Ollama + Llama 3.1", alt: "LM Studio", why: "Ollama = CLI/API. LM Studio = GUI + download manager." },
    { task: "Multi-agent system", best: "CrewAI", alt: "AutoGen / Agent Zero", why: "CrewAI = role-based tasks. AutoGen = konwersacyjne. A0 = our stack." },
    { task: "Fine-tuning LLM", best: "Unsloth + LoRA", alt: "Modal/RunPod GPU", why: "Unsloth = 2x szybciej, 60% mniej VRAM. Cloud GPU = scale." }
  ];

  const CF_WORKERS = [
    { name: "whitecat-product-api", desc: "Main product API for WHITECAT", route: "api.whitecat.pl/*", reqDay: 10000, est: "$5.00" },
    { name: "moa-pipeline-orchestrator", desc: "MOA content generation pipeline", route: "moa.mybonzo.com/*", reqDay: 1000, est: "$2.00" },
    { name: "x402-micropayment-handler", desc: "x402 protocol micropayments", route: "pay.mybonzo.com/*", reqDay: 500, est: "$1.00" },
    { name: "whitecat-cdn", desc: "Content delivery and caching", route: "cdn.whitecat.pl/*", reqDay: 50000, est: "$10.00" }
  ];

  const CF_D1 = [
    { name: "whitecat-products-db", desc: "Product catalog database", size: "500 MB", qDay: 5000, est: "$5.00" },
    { name: "moa-response-cache", desc: "MOA pipeline cache", size: "100 MB", qDay: 10000, est: "$3.00" }
  ];

  const CF_R2 = [
    { name: "whitecat-product-images", desc: "Product images storage", size: "10 GB", objects: 5000, est: "$0.50" },
    { name: "whitecat-generated-content", desc: "AI generated content storage", size: "2 GB", objects: 1000, est: "$0.10" }
  ];

  const CF_KV = [
    { name: "MOA session state", desc: "Pipeline session management", keys: 500, est: "$1.00" },
    { name: "API rate limiter", desc: "Rate limiting counters", keys: 1000, est: "$0.50" }
  ];

  const CF_HYPER = [
    { name: "whitecat-postgres-connection", db: "whitecat", connections: 10, reqDay: 5000, est: "$5.00" }
  ];

  const CF_COST_SUMMARY = {
    budget: 100.00,
    workers: 18.00, d1: 8.00, r2: 0.60, kv: 1.50, hyperdrive: 5.00,
    total: 33.10
  };

  const MOA_STAGES = [
    { name: "Input Processing", desc: "Parse product data and prepare prompts", timeout: "10s" },
    { name: "Parallel Writing", desc: "Generate content from multiple writers", timeout: "60s" },
    { name: "Critique", desc: "Quality control and feedback (2 iterations)", timeout: "30s" },
    { name: "Aggregation", desc: "Synthesize final content", timeout: "45s" },
    { name: "Validation", desc: "Final quality check", timeout: "15s" }
  ];

  const MOA_CRITERIA = [
    { name: "Flesch Readability", desc: "Polish Flesch readability score", target: "60‚Äì70", weight: 0.20 },
    { name: "Keyword Density", desc: "SEO keyword density", target: "1‚Äì2%", weight: 0.20 },
    { name: "Brand Voice", desc: "WHITECAT brand voice consistency", target: "0.90", weight: 0.25 },
    { name: "Factual Accuracy", desc: "Technical accuracy score", target: "0.95", weight: 0.25 },
    { name: "Polish Grammar", desc: "Polish language correctness", target: "0.98", weight: 0.10 }
  ];

  const SKILLS = {
    "Architecture": [
      { name: "api-design-principles", desc: "REST and GraphQL API design" },
      { name: "architecture-decision-records", desc: "ADR ‚Äî Architecture Decision Records" },
      { name: "architecture-patterns", desc: "Clean, Hexagonal, DDD patterns" },
      { name: "c4-architecture", desc: "C4 architecture documentation" },
      { name: "code-refactoring-tech-debt", desc: "Tech debt identification & plans" },
      { name: "documentation-generation", desc: "API docs, diagrams, guides" },
      { name: "legacy-modernizer", desc: "Legacy codebase modernization" },
      { name: "monorepo-management", desc: "Turborepo, Nx, pnpm workspaces" }
    ],
    "Business & Strategy": [
      { name: "business-analyst", desc: "KPI frameworks, data-driven insights" },
      { name: "competitive-landscape", desc: "Porter's Five Forces, positioning" },
      { name: "kpi-dashboard-design", desc: "Metrics, visualization, monitoring" },
      { name: "market-sizing-analysis", desc: "TAM, SAM, SOM calculations" },
      { name: "risk-manager", desc: "Portfolio risk, hedging strategies" },
      { name: "sales-automator", desc: "Cold emails, proposals, scripts" },
      { name: "seo-content-planner", desc: "Content calendars, topic clusters" },
      { name: "seo-keyword-strategist", desc: "Keyword analysis, LSI keywords" },
      { name: "startup-financial-modeling", desc: "Projections, burn rate, runway" },
      { name: "startup-metrics-framework", desc: "SaaS metrics, CAC/LTV, Rule of 40" },
      { name: "team-composition-analysis", desc: "Org chart, hiring, compensation" }
    ],
    "Data & AI": [
      { name: "data-engineering-pipeline", desc: "Batch & streaming data pipelines" },
      { name: "data-scientist", desc: "ML, statistical modeling, BI" },
      { name: "data-storytelling", desc: "Data ‚Üí compelling narratives" },
      { name: "mlops-engineer", desc: "MLflow, Kubeflow, experiment tracking" },
      { name: "prompt-engineer", desc: "Advanced prompting, LLM optimization" },
      { name: "python-performance-optimization", desc: "cProfile, memory profiling" },
      { name: "rag-implementation", desc: "RAG systems, vector databases" },
      { name: "sql-pro", desc: "OLTP/OLAP, performance tuning" },
      { name: "vector-database-engineer", desc: "Pinecone, Weaviate, pgvector" }
    ],
    "Development": [
      { name: "api-testing-observability", desc: "API mocking, parallel development" },
      { name: "code-review-excellence", desc: "Constructive feedback, knowledge sharing" },
      { name: "fastapi-pro", desc: "Async APIs, SQLAlchemy, Pydantic V2" },
      { name: "frontend-security-coder", desc: "XSS prevention, client-side security" },
      { name: "git-advanced-workflows", desc: "Rebasing, cherry-picking, bisect" },
      { name: "python-packaging", desc: "pyproject.toml, PyPI publishing" },
      { name: "react-modernization", desc: "Hooks, concurrent features" },
      { name: "react-state-management", desc: "Redux Toolkit, Zustand, Jotai" },
      { name: "tailwind-design-system", desc: "Design tokens, component libraries" },
      { name: "typescript-pro", desc: "Advanced types, generics, strict safety" }
    ],
    "Infrastructure": [
      { name: "bash-defensive-patterns", desc: "Production-grade shell scripts" },
      { name: "cicd-automation", desc: "GitHub Actions, CI/CD pipelines" },
      { name: "cost-optimization", desc: "Cloud costs, rightsizing, RI" },
      { name: "database-admin", desc: "Cloud databases, IaC, reliability" },
      { name: "devops-troubleshooter", desc: "Incident response, log analysis" },
      { name: "incident-response", desc: "Outages, post-mortems, protocols" },
      { name: "observability-engineer", desc: "Monitoring, tracing, SLI/SLO" },
      { name: "security-auditor", desc: "DevSecOps, OWASP, compliance" },
      { name: "terraform-specialist", desc: "Terraform/OpenTofu, multi-cloud" }
    ],
    "UI/UX": [
      { name: "ui-ux-pro-max", desc: "67+ styles, 96+ palettes, design systems" }
    ]
  };

  const PROVIDERS = [
    { id: "a0_venice", name: "Agent Zero API", litellm: "openai", note: "api_base: llm.agent-zero.ai" },
    { id: "anthropic", name: "Anthropic", litellm: "anthropic", note: "Claude models" },
    { id: "deepseek", name: "DeepSeek", litellm: "deepseek", note: "R1, V3" },
    { id: "github_copilot", name: "GitHub Copilot", litellm: "github_copilot", note: "Editor headers" },
    { id: "google", name: "Google", litellm: "gemini", note: "Gemini models" },
    { id: "groq", name: "Groq", litellm: "groq", note: "Fast inference" },
    { id: "huggingface", name: "HuggingFace", litellm: "huggingface", note: "Open models" },
    { id: "lm_studio", name: "LM Studio", litellm: "lm_studio", note: "Local" },
    { id: "mistral", name: "Mistral AI", litellm: "mistral", note: "Mistral/Mixtral" },
    { id: "moonshot", name: "Moonshot AI", litellm: "moonshot", note: "" },
    { id: "ollama", name: "Ollama", litellm: "ollama", note: "Local models" },
    { id: "openai", name: "OpenAI", litellm: "openai", note: "GPT models" },
    { id: "azure", name: "OpenAI Azure", litellm: "azure", note: "Cloud hosted" },
    { id: "bedrock", name: "AWS Bedrock", litellm: "bedrock", note: "AWS managed" },
    { id: "openrouter", name: "OpenRouter", litellm: "openrouter", note: "Multi-provider" },
    { id: "sambanova", name: "Sambanova", litellm: "sambanova", note: "" },
    { id: "venice", name: "Venice.ai", litellm: "openai", note: "api.venice.ai" },
    { id: "xai", name: "xAI", litellm: "xai", note: "Grok models" },
    { id: "zai", name: "Z.AI", litellm: "openai", note: "api.z.ai" },
    { id: "zai_coding", name: "Z.AI Coding", litellm: "openai", note: "api.z.ai/coding" },
    { id: "other", name: "Other (OpenAI compat)", litellm: "openai", note: "Custom endpoints" }
  ];

  const MCP_SERVERS = ["Supabase", "Brave Search", "GitHub", "Cloudflare", "Tavily", "Perplexity", "DeepSeek"];

  // ============= OPTIMAISER DATA =============
  const OPTIMAISER_COMPONENTS = [
    { name: "pc_optimizer.py", desc: "Core ‚Äî klasa PCOptimizer", features: ["monitor_system()", "clean_temp_files()", "optimize_processes()", "save_session()"], lines: 128, type: "core" },
    { name: "pc_optimizer_console.py", desc: "Wersja konsolowa z interaktywnym menu", features: ["main_menu()", "display_stats()", "clean_recycle_bin()", "get_startup_programs()", "show_session_history()"], lines: 320, type: "console" },
    { name: "pc_optimizer_gui.py", desc: "GUI ‚Äî PyQt5 z zak≈Çadkami", features: ["Monitoring tab", "Czyszczenie tab", "Historia tab", "QProgressBar CPU/RAM/GPU"], lines: 170, type: "gui" },
    { name: "dashboard.py", desc: "Dashboard launcher ‚Äî uruchamia GUI/Console", features: ["SystemMonitorThread", "Dark theme (Fusion)", "Live monitoring 2s", "SQLite session stats", "Left/Right columns"], lines: 500, type: "dashboard" }
  ];

  const OPTIMAISER_EXES = [
    { name: "PC_Optimizer_GUI.exe", desc: "Interfejs graficzny z wykresami" },
    { name: "PC_Optimizer_Console.exe", desc: "Wersja tekstowa dla zaawansowanych" },
    { name: "PC_Optimizer_Dashboard.exe", desc: "Dashboard launcher" }
  ];

  const OPTIMAISER_DEPS = [
    { pkg: "psutil", ver: "5.9.8", role: "System monitoring (CPU/RAM/disk)" },
    { pkg: "GPUtil", ver: "1.4.0", role: "NVIDIA GPU monitoring" },
    { pkg: "PyQt5", ver: "5.15.10", role: "GUI framework" },
    { pkg: "wmi", ver: "1.5.1", role: "Windows Management Instrumentation" },
    { pkg: "pywin32", ver: "311", role: "Windows API bindings" },
    { pkg: "send2trash", ver: "1.8.3", role: "Safe file deletion" },
    { pkg: "SQLAlchemy", ver: "2.0.28", role: "ORM (optional)" },
    { pkg: "loguru", ver: "0.7.2", role: "Structured logging" },
    { pkg: "pyinstaller", ver: "6.18.0", role: "EXE packaging" },
    { pkg: "schedule", ver: "1.2.1", role: "Task scheduling" },
    { pkg: "watchdog", ver: "4.0.0", role: "File system monitoring" },
    { pkg: "memory-profiler", ver: "0.61.0", role: "Memory profiling" }
  ];

  const OPTIMAISER_FEATURES = [
    { icon: "üìä", title: "Monitoring", items: ["CPU usage + rdzenie + freq", "RAM used/total/available", "Disk C:\\ usage + free", "NVIDIA GPU load/temp/VRAM", "Live refresh co 2s"] },
    { icon: "üßπ", title: "Czyszczenie", items: ["%TEMP% / %TMP%", "C:\\Windows\\Temp", "Kosz systemowy", "DNS cache (ipconfig /flushdns)", "Garbage collector Python"] },
    { icon: "‚ö°", title: "Optymalizacja", items: ["Kill proces√≥w > 5% RAM", "Lista program√≥w autostart", "Pe≈Çna optymalizacja (all-in-one)", "Historia sesji (SQLite)", "Session tracking (cleaned/freed)"] }
  ];

  // ============= NET CONTROL DATA =============
  const NETCTRL_COMPONENTS = [
    { name: "NetworkGraph.tsx", desc: "Interaktywna wizualizacja sieci ‚Äî porty, tunele, VPN, agenty", size: "24 KB" },
    { name: "NetworkGraphOptimized.tsx", desc: "Zoptymalizowana wersja grafu sieciowego", size: "19 KB" },
    { name: "TunnelStatus.tsx", desc: "Status tuneli CF/ngrok ‚Äî toggle, persistence, bandwidth", size: "11 KB" },
    { name: "TunnelStatusOptimized.tsx", desc: "Zoptymalizowana wersja panelu tuneli", size: "12 KB" },
    { name: "CreateTunnelModal.tsx", desc: "Modal tworzenia tunelu ‚Äî port, provider, obfuskacja", size: "6 KB" },
    { name: "SpeedTest.tsx", desc: "Test prƒôdko≈õci sieci ‚Äî ping, download, upload", size: "3 KB" },
    { name: "SpeedTestOptimized.tsx", desc: "Zoptymalizowany speed test z historiƒÖ", size: "6 KB" },
    { name: "PowerShellTools.tsx", desc: "Narzƒôdzia PowerShell ‚Äî komendy systemowe", size: "10 KB" },
    { name: "Metrics.tsx", desc: "Dashboard metryk u≈ºytkowania", size: "3 KB" },
    { name: "ArchitectureDocs.tsx", desc: "Dokumentacja architektury infrastruktury", size: "4 KB" },
    { name: "ErrorBoundary.tsx", desc: "React Error Boundary wrapper", size: "3 KB" },
    { name: "NetworkMap.tsx", desc: "Mapa sieciowa ‚Äî overview topologii", size: "1 KB" }
  ];

  const NETCTRL_SERVICES = [
    { name: "geminiService.ts", desc: "Integracja Google Gemini AI ‚Äî raporty agent√≥w, analiza bezpiecze≈Ñstwa", size: "4 KB" },
    { name: "metricsService.ts", desc: "Tracking event√≥w u≈ºytkowania ‚Äî tunnel/service/speed test", size: "5 KB" },
    { name: "powershellService.ts", desc: "Wykonywanie komend PowerShell z poziomu przeglƒÖdarki", size: "8 KB" },
    { name: "useCustomHooks.ts", desc: "Custom React hooks ‚Äî monitoring, persistence, state", size: "5 KB" }
  ];

  const NETCTRL_MOCK_SERVICES = [
    { name: "nginx-main", port: 80, protocol: "TCP", vuln: 12, exposed: true },
    { name: "fastapi-backend", port: 8000, protocol: "TCP", vuln: 45, exposed: false },
    { name: "redis-cache", port: 6379, protocol: "TCP", vuln: 5, exposed: false },
    { name: "unsecured-dev-srv", port: 8080, protocol: "TCP", vuln: 88, exposed: true }
  ];

  const NETCTRL_TYPES = [
    { name: "AgentStatus", type: "enum", values: "IDLE | WORKING | ALERT | OFFLINE" },
    { name: "NetworkService", type: "interface", values: "pid, name, port, protocol, status, tunnel, isExposed, vulnerabilityScore" },
    { name: "VpnStatus", type: "interface", values: "isActive, location, ip, provider" },
    { name: "SystemTask", type: "interface", values: "id, name, cpu, memory, runtime, status" },
    { name: "Agent", type: "interface", values: "id, name, role, status, lastActivity, log[]" },
    { name: "TunnelConfig", type: "interface", values: "id, label, obfuscatedId, provider, localPort, publicUrl, isActive, isPersistent, bandwidth" },
    { name: "SystemReport", type: "interface", values: "id, timestamp, title, content, severity" }
  ];

  // ============= AGENT ZERO DOCS DATA =============
  const A0_DOCS = {
    "Quick Start": [
      { title: "quickstart.md", desc: "Docker install ‚Üí first chat" },
      { title: "installation.md", desc: "Docker Desktop, model config, Ollama" },
      { title: "vps-deployment.md", desc: "VPS + Apache reverse proxy + SSL" },
      { title: "dev-setup.md", desc: "VS Code + Conda + debugpy" }
    ],
    "User Guides": [
      { title: "usage.md", desc: "Browser agent, projects, tasks, voice, backup" },
      { title: "projects.md", desc: "Isolated workspaces, instructions, memory" },
      { title: "api-integration.md", desc: "Zero-code API integration via memory" },
      { title: "mcp-setup.md", desc: "External MCP servers (Playwright, n8n, Gmail)" },
      { title: "a2a-setup.md", desc: "Agent-to-Agent via FastA2A protocol" },
      { title: "troubleshooting.md", desc: "FAQ, Docker issues, performance" }
    ],
    "Developer Docs": [
      { title: "architecture.md", desc: "System arch, directory structure, components" },
      { title: "extensions.md", desc: "Extension points, tools, prompts, override" },
      { title: "connectivity.md", desc: "External API, MCP server, A2A endpoints" },
      { title: "websockets.md", desc: "SocketIO, state sync, producer/consumer" },
      { title: "mcp-configuration.md", desc: "Stdio/SSE/HTTP MCP server types" },
      { title: "notifications.md", desc: "Toast system, groups, backend sync" },
      { title: "contributing-skills.md", desc: "SKILL.md standard, marketplace" }
    ]
  };

  const A0_ARCH_COMPONENTS = [
    { name: "Agents", desc: "Hierarchical agents with CoT, tool use, subordinate delegation", icon: "ü§ñ" },
    { name: "Tools", desc: "Built-in: code_execution, memory, call_subordinate, SearXNG, behavior_adjustment", icon: "üîß" },
    { name: "Memory", desc: "Fragments, solutions, metadata ‚Äî hybrid model with summarization", icon: "üß†" },
    { name: "Prompts", desc: "Markdown templates with {{var}} placeholders, file includes, dynamic loaders", icon: "üìù" },
    { name: "Knowledge", desc: "Custom files in /knowledge/custom/main ‚Äî PDFs, docs, databases", icon: "üìö" },
    { name: "Skills", desc: "SKILL.md standard ‚Äî cross-platform (Claude Code, Cursor, Copilot, Goose)", icon: "üéØ" },
    { name: "Extensions", desc: "Lifecycle hooks: agent_init, before_main_llm, monologue, reasoning_stream", icon: "‚ö°" },
    { name: "Projects", desc: "Isolated workspaces: instructions, memory, secrets, variables, Git", icon: "üìÅ" }
  ];

  const A0_API_ENDPOINTS = [
    { method: "POST", path: "/api_message", desc: "Send message, get response (text + attachments)" },
    { method: "GET", path: "/api_log_get", desc: "Retrieve log data by context ID" },
    { method: "POST", path: "/api_terminate_chat", desc: "Terminate and remove chat context" },
    { method: "POST", path: "/api_reset_chat", desc: "Reset chat history, keep context" },
    { method: "POST", path: "/api_files_get", desc: "Get files as base64 by paths" },
    { method: "SSE", path: "/mcp/sse", desc: "MCP Server ‚Äî SSE transport" },
    { method: "HTTP", path: "/mcp/http/", desc: "MCP Server ‚Äî Streamable HTTP" },
    { method: "A2A", path: "/a2a/t-TOKEN", desc: "Agent-to-Agent via FastA2A" }
  ];

  const A0_EXTENSION_POINTS = [
    "agent_init", "before_main_llm_call", "message_loop_start", "message_loop_end",
    "message_loop_prompts_before", "message_loop_prompts_after", "monologue_start",
    "monologue_end", "reasoning_stream", "response_stream", "system_prompt"
  ];

  const AGENTS = ["jimbo", "default", "developer", "hacker", "researcher", "agent0", "_example"];

  const COMMANDS = {
    "üîÆ OPSX Slash Commands": [
      { cmd: "/opsx:new", desc: "Rozpocznij nowƒÖ zmianƒô (feature/fix/mod)" },
      { cmd: "/opsx:continue", desc: "Nastƒôpny artefakt w workflow" },
      { cmd: "/opsx:ff", desc: "Fast-forward ‚Äî all artifacts at once" },
      { cmd: "/opsx:apply", desc: "Implementuj taski z changu" },
      { cmd: "/opsx:verify", desc: "Waliduj implementacjƒô vs artefakty" },
      { cmd: "/opsx:archive", desc: "Archiwizuj uko≈ÑczonƒÖ zmianƒô" },
      { cmd: "/opsx:explore", desc: "Explore mode ‚Äî thinking partner" },
      { cmd: "/opsx:sync", desc: "Sync delta specs ‚Üí main specs" },
      { cmd: "/opsx:bulk-archive", desc: "Archiwizuj wiele zmian naraz" },
      { cmd: "/opsx:onboard", desc: "Guided onboarding ‚Äî full cycle" }
    ],
    "üöÄ Project Prompts": [
      { cmd: "/jimbo-app", desc: "JIMBO COMMAND CENTER ‚Äî full SPA scenario" }
    ],
    "üñ•Ô∏è OpenSpec CLI": [
      { cmd: "npx openspec list", desc: "Lista wszystkich zmian" },
      { cmd: "npx openspec validate", desc: "Waliduj artefakty" },
      { cmd: "npx openspec show <change-id>", desc: "Poka≈º szczeg√≥≈Çy zmiany" },
      { cmd: "npx openspec init --tools github-copilot --force", desc: "Re-init OpenSpec" }
    ],
    "üê≥ Podman & Agent Zero": [
      { cmd: "podman machine start", desc: "Uruchom Podman VM" },
      { cmd: "podman machine stop", desc: "Zatrzymaj Podman VM" },
      { cmd: "podman machine info", desc: "Info o Podman VM (CPU/RAM/disk)" },
      { cmd: "podman ps -a", desc: "Lista wszystkich kontener√≥w" },
      { cmd: "podman images", desc: "Lista obraz√≥w" },
      { cmd: "podman start bonzo-agent-zero", desc: "Start kontener Agent Zero" },
      { cmd: "podman stop bonzo-agent-zero", desc: "Stop kontener Agent Zero" },
      { cmd: "podman restart bonzo-agent-zero", desc: "Restart Agent Zero" },
      { cmd: "podman logs -f bonzo-agent-zero", desc: "Logi Agent Zero (follow)" },
      { cmd: "podman logs --tail 100 bonzo-agent-zero", desc: "Ostatnie 100 linii log√≥w" },
      { cmd: "podman exec -it bonzo-agent-zero bash", desc: "Shell wewnƒÖtrz kontenera" },
      { cmd: "podman exec bonzo-agent-zero python run_ui.py", desc: "Uruchom WebUI wewnƒÖtrz kontenera" },
      { cmd: "podman stats bonzo-agent-zero", desc: "Live stats CPU/RAM kontenera" },
      { cmd: "podman inspect bonzo-agent-zero | Select-String IPAddress", desc: "IP kontenera" },
      { cmd: "podman pull agent0ai/agent-zero:latest", desc: "Pobierz najnowszy obraz A0" },
      { cmd: 'podman run -d --name bonzo-agent-zero -p 50082:80 -p 50101:22 -v T:\\DOcker_aGENT_zero:/a0/usr agent0ai/agent-zero', desc: "Nowy kontener A0 z wolumenami" },
      { cmd: "podman system prune -af", desc: "Wyczy≈õƒá nieu≈ºywane obrazy/kontenery" },
      { cmd: "podman network ls", desc: "Lista sieci Podman" },
      { cmd: "podman volume ls", desc: "Lista wolumen√≥w" }
    ],
    "üîß PowerShell ‚Äî Naprawa & Diagnostyka": [
      { cmd: "sfc /scannow", desc: "Sprawd≈∫ i napraw pliki systemowe Windows" },
      { cmd: "DISM /Online /Cleanup-Image /RestoreHealth", desc: "Napraw obraz systemu (DISM)" },
      { cmd: "chkdsk C: /f /r", desc: "Sprawd≈∫ dysk C: (wymaga restartu)" },
      { cmd: "Get-Process | Sort-Object CPU -Descending | Select-Object -First 15", desc: "Top 15 proces√≥w po CPU" },
      { cmd: "Get-Process | Sort-Object WorkingSet64 -Descending | Select-Object -First 15 Name, @{N='MB';E={[math]::Round($_.WorkingSet64/1MB,1)}}", desc: "Top 15 proces√≥w po RAM" },
      { cmd: "Get-Service | Where-Object Status -eq 'Running' | Sort-Object DisplayName", desc: "Lista uruchomionych us≈Çug" },
      { cmd: "Get-NetTCPConnection -State Listen | Select-Object LocalPort, OwningProcess | Sort-Object LocalPort", desc: "Porty nas≈ÇuchujƒÖce" },
      { cmd: "Test-NetConnection -ComputerName 8.8.8.8 -Port 443", desc: "Test po≈ÇƒÖczenia do Google DNS" },
      { cmd: "Get-NetAdapter | Select-Object Name, Status, LinkSpeed", desc: "Karty sieciowe i status" },
      { cmd: "ipconfig /flushdns", desc: "Wyczy≈õƒá cache DNS" },
      { cmd: "ipconfig /release; ipconfig /renew", desc: "Odn√≥w adres IP (DHCP)" },
      { cmd: "netsh winsock reset", desc: "Reset Winsock (naprawa sieci)" },
      { cmd: "netsh int ip reset", desc: "Reset stosu TCP/IP" },
      { cmd: "Get-Disk | Select-Object Number, FriendlyName, Size, HealthStatus", desc: "Status dysk√≥w" },
      { cmd: "Get-PnpDevice -Status Error", desc: "UrzƒÖdzenia z b≈Çƒôdami (drivers)" },
      { cmd: "Get-EventLog -LogName System -EntryType Error -Newest 20", desc: "Ostatnie 20 b≈Çƒôd√≥w systemowych" },
      { cmd: "Get-EventLog -LogName Application -EntryType Error -Newest 20", desc: "Ostatnie 20 b≈Çƒôd√≥w aplikacji" },
      { cmd: "[System.Environment]::OSVersion | Format-List", desc: "Wersja Windows" },
      { cmd: "Get-ComputerInfo | Select-Object CsName, WindowsVersion, OsArchitecture, CsTotalPhysicalMemory", desc: "Info o systemie" },
      { cmd: "Get-WinEvent -LogName 'Microsoft-Windows-Windows Defender/Operational' -MaxEvents 10", desc: "Logi Windows Defender" },
      { cmd: "Get-MpComputerStatus | Select-Object AntivirusEnabled, RealTimeProtectionEnabled, AntivirusSignatureLastUpdated", desc: "Status Windows Defender" },
      { cmd: "Clear-RecycleBin -Force", desc: "Opr√≥≈ºnij kosz" },
      { cmd: "Get-ChildItem $env:TEMP -Recurse | Remove-Item -Force -Recurse -ErrorAction SilentlyContinue", desc: "Wyczy≈õƒá pliki tymczasowe" },
      { cmd: "wmic bios get serialnumber", desc: "Numer seryjny BIOS" },
      { cmd: "powercfg /batteryreport", desc: "Raport baterii (laptopy)" },
      { cmd: "powercfg /energy", desc: "Raport energii (60s analiza)" }
    ],
    "‚å®Ô∏è CMD ‚Äî Komendy naprawcze": [
      { cmd: "ping -t google.com", desc: "CiƒÖg≈Çy ping (Ctrl+C aby przerwaƒá)" },
      { cmd: "tracert google.com", desc: "Trasowanie pakiet√≥w" },
      { cmd: "nslookup mybonzo.com", desc: "Sprawd≈∫ DNS dla domeny" },
      { cmd: "netstat -ano | findstr LISTENING", desc: "Porty nas≈ÇuchujƒÖce z PID" },
      { cmd: "tasklist /fi \"STATUS eq running\"", desc: "Lista uruchomionych proces√≥w" },
      { cmd: "taskkill /f /pid <PID>", desc: "Zabij proces po PID" },
      { cmd: "systeminfo", desc: "Pe≈Çne info systemowe" },
      { cmd: "gpupdate /force", desc: "Wymu≈õ aktualizacjƒô polityk grupowych" },
      { cmd: "shutdown /r /t 0", desc: "Natychmiastowy restart" },
      { cmd: "shutdown /s /t 0", desc: "Natychmiastowe wy≈ÇƒÖczenie" },
      { cmd: "assoc", desc: "Lista skojarze≈Ñ plik√≥w" },
      { cmd: "cipher /w:C:\\", desc: "Nadpisz usuniƒôte dane (secure wipe)" },
      { cmd: "tree /f > drzewo.txt", desc: "Struktura plik√≥w do pliku" },
      { cmd: "fc plik1.txt plik2.txt", desc: "Por√≥wnaj dwa pliki" },
      { cmd: "reg query HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", desc: "Programy autostart (rejestr)" }
    ],
    "ü™ü Win+R ‚Äî Skr√≥ty systemowe": [
      { cmd: "msconfig", desc: "Konfiguracja systemu (autostart, boot)" },
      { cmd: "devmgmt.msc", desc: "Mened≈ºer urzƒÖdze≈Ñ" },
      { cmd: "diskmgmt.msc", desc: "ZarzƒÖdzanie dyskami" },
      { cmd: "services.msc", desc: "Us≈Çugi systemowe" },
      { cmd: "eventvwr.msc", desc: "PodglƒÖd zdarze≈Ñ" },
      { cmd: "compmgmt.msc", desc: "ZarzƒÖdzanie komputerem" },
      { cmd: "control", desc: "Panel sterowania" },
      { cmd: "appwiz.cpl", desc: "Programy i funkcje (odinstaluj)" },
      { cmd: "ncpa.cpl", desc: "Po≈ÇƒÖczenia sieciowe" },
      { cmd: "firewall.cpl", desc: "Zapora Windows" },
      { cmd: "sysdm.cpl", desc: "W≈Ça≈õciwo≈õci systemu" },
      { cmd: "regedit", desc: "Edytor rejestru" },
      { cmd: "gpedit.msc", desc: "Edytor polityk grupowych (Pro/Enterprise)" },
      { cmd: "taskschd.msc", desc: "Harmonogram zada≈Ñ" },
      { cmd: "perfmon", desc: "Monitor wydajno≈õci" },
      { cmd: "resmon", desc: "Monitor zasob√≥w (CPU/RAM/Disk/Net)" },
      { cmd: "msinfo32", desc: "Pe≈Çne info systemowe (GUI)" },
      { cmd: "dxdiag", desc: "Diagnostyka DirectX (GPU info)" },
      { cmd: "cleanmgr", desc: "Oczyszczanie dysku" },
      { cmd: "optionalfeatures", desc: "W≈ÇƒÖcz/wy≈ÇƒÖcz funkcje Windows" },
      { cmd: "winver", desc: "Wersja Windows" },
      { cmd: "mstsc", desc: "Pulpit zdalny (RDP)" },
      { cmd: "notepad", desc: "Notatnik" },
      { cmd: "calc", desc: "Kalkulator" },
      { cmd: "cmd", desc: "Wiersz polece≈Ñ" },
      { cmd: "powershell", desc: "PowerShell" },
      { cmd: "wt", desc: "Windows Terminal" },
      { cmd: "shell:startup", desc: "Folder autostartu (Explorer)" },
      { cmd: "shell:sendto", desc: "Folder 'Wy≈õlij do' (Explorer)" },
      { cmd: "%temp%", desc: "Folder plik√≥w tymczasowych" },
      { cmd: ".", desc: "Folder u≈ºytkownika (Explorer)" }
    ]
  };

  // ============= API KEY TESTING =============
  const API_KEY_TESTS = {
    "OpenAI": {
      url: "https://api.openai.com/v1/models",
      method: "GET",
      headerKey: "Authorization",
      headerPrefix: "Bearer ",
      successField: "data",
      doc: "https://platform.openai.com/api-keys"
    },
    "Anthropic": {
      url: "https://api.anthropic.com/v1/messages",
      method: "POST",
      headerKey: "x-api-key",
      headerPrefix: "",
      extraHeaders: { "anthropic-version": "2023-06-01", "Content-Type": "application/json" },
      body: JSON.stringify({ model: "claude-sonnet-4-20250514", max_tokens: 1, messages: [{ role: "user", content: "hi" }] }),
      successCodes: [200, 400],
      doc: "https://console.anthropic.com/settings/keys"
    },
    "Google Gemini": {
      url: "https://generativelanguage.googleapis.com/v1beta/models?key=",
      method: "GET",
      appendKey: true,
      headerKey: null,
      successField: "models",
      doc: "https://aistudio.google.com/apikey"
    },
    "DeepSeek": {
      url: "https://api.deepseek.com/models",
      method: "GET",
      headerKey: "Authorization",
      headerPrefix: "Bearer ",
      successField: "data",
      doc: "https://platform.deepseek.com/api_keys"
    },
    "OpenRouter": {
      url: "https://openrouter.ai/api/v1/models",
      method: "GET",
      headerKey: "Authorization",
      headerPrefix: "Bearer ",
      successField: "data",
      doc: "https://openrouter.ai/keys"
    },
    "Groq": {
      url: "https://api.groq.com/openai/v1/models",
      method: "GET",
      headerKey: "Authorization",
      headerPrefix: "Bearer ",
      successField: "data",
      doc: "https://console.groq.com/keys"
    },
    "Brave Search": {
      url: "https://api.search.brave.com/res/v1/web/search?q=test&count=1",
      method: "GET",
      headerKey: "X-Subscription-Token",
      headerPrefix: "",
      successField: "web",
      doc: "https://brave.com/search/api/"
    },
    "Tavily": {
      url: "https://api.tavily.com/search",
      method: "POST",
      headerKey: "Content-Type",
      headerPrefix: "",
      customTest: true,
      body: null,
      doc: "https://app.tavily.com/home"
    },
    "Cloudflare": {
      url: "https://api.cloudflare.com/client/v4/user/tokens/verify",
      method: "GET",
      headerKey: "Authorization",
      headerPrefix: "Bearer ",
      successField: "success",
      doc: "https://dash.cloudflare.com/profile/api-tokens"
    },
    "GitHub": {
      url: "https://api.github.com/user",
      method: "GET",
      headerKey: "Authorization",
      headerPrefix: "Bearer ",
      successField: "login",
      doc: "https://github.com/settings/tokens"
    },
    "Supabase": {
      url: null,
      method: "GET",
      headerKey: "apikey",
      headerPrefix: "",
      note: "Wymaga URL projektu + anon key",
      doc: "https://supabase.com/dashboard/project/_/settings/api"
    },
    "Perplexity": {
      url: "https://api.perplexity.ai/chat/completions",
      method: "POST",
      headerKey: "Authorization",
      headerPrefix: "Bearer ",
      extraHeaders: { "Content-Type": "application/json" },
      body: JSON.stringify({ model: "sonar", messages: [{ role: "user", content: "hi" }], max_tokens: 1 }),
      successCodes: [200],
      doc: "https://www.perplexity.ai/settings/api"
    },
    "xAI (Grok)": {
      url: "https://api.x.ai/v1/models",
      method: "GET",
      headerKey: "Authorization",
      headerPrefix: "Bearer ",
      successField: "data",
      doc: "https://console.x.ai/"
    }
  };

  const DEFAULT_DOD = [
    "npm run build && npm test bez b≈Çƒôd√≥w",
    "Testy ‚Äî coverage ‚â• 80%",
    "Wpis w notes/ opisujƒÖcy zmianƒô",
    "CLAUDE.md zaktualizowany (je≈õli arch)",
    "Git diff ‚Äî bez secrets, clean commits",
    "Brak dead code bez TODO + GitHub issue"
  ];

  const DEFAULT_TASKS = [
    { text: "Aktualizuj CLAUDE.md je≈õli zmienia siƒô architektura", priority: "high", completed: false },
    { text: "Dodaj nowy wpis do notes/decisions.md po wa≈ºnej decyzji", priority: "medium", completed: false },
    { text: "Generuj snapshot co ~2h aktywnej pracy", priority: "low", completed: false }
  ];

  // ============= BUDGET CONFIG (editable, saved in localStorage) =============
  const DEFAULT_BUDGET = { ai: 300, cf: 100, buffer: 100, total: 500 };
  let BUDGET = JSON.parse(localStorage.getItem('kgt_budget') || JSON.stringify(DEFAULT_BUDGET));
  function saveBudget() { localStorage.setItem('kgt_budget', JSON.stringify(BUDGET)); }
  function updateBudgetDisplay() {
    document.querySelectorAll('.budget-ai').forEach(el => el.textContent = '$' + BUDGET.ai);
    document.querySelectorAll('.budget-cf').forEach(el => el.textContent = '$' + BUDGET.cf);
    document.querySelectorAll('.budget-buffer').forEach(el => el.textContent = '$' + BUDGET.buffer);
    document.querySelectorAll('.budget-total').forEach(el => el.textContent = '$' + BUDGET.total);
    const statBudget = document.getElementById('statBudget');
    if (statBudget) statBudget.textContent = '$' + BUDGET.total;
    // Update CF_COST_SUMMARY budget reference
    CF_COST_SUMMARY.budget = BUDGET.cf;
  }
  function setBudgetField(field, value) {
    const v = parseInt(value) || 0;
    BUDGET[field] = v;
    BUDGET.total = BUDGET.ai + BUDGET.cf + BUDGET.buffer;
    saveBudget();
    updateBudgetDisplay();
    renderOverview();
  }
  function resetBudget() {
    BUDGET = { ...DEFAULT_BUDGET };
    saveBudget();
    updateBudgetDisplay();
    renderOverview();
    document.querySelectorAll('.budget-input').forEach(inp => inp.value = BUDGET[inp.dataset.field]);
  }

  // ============= STATE =============
  let tasks = JSON.parse(localStorage.getItem('kgt_tasks') || JSON.stringify(DEFAULT_TASKS));
  let dodItems = JSON.parse(localStorage.getItem('kgt_dod') || JSON.stringify(DEFAULT_DOD.map(t => ({ text: t, checked: false }))));
  let activatedSkills = new Set(JSON.parse(localStorage.getItem('kgt_skills') || '[]'));
  let totalMinutes = parseInt(localStorage.getItem('kgt_session') || '0');

  // ============= INIT =============
  document.addEventListener('DOMContentLoaded', () => {
    renderOverview();
    renderModels();
    renderAiLib();
    renderCloudflare();
    renderMOA();
    renderSkills();
    renderTasks();
    renderDoD();
    renderAgent();
    renderAgentDocs();
    renderOptimaiser();
    initLiveOptimiser();
    renderNetCtrl();
    renderCommands();
    loadNotes();
    updateStats();
    // Init budget display from localStorage
    updateBudgetDisplay();
    document.querySelectorAll('.budget-input').forEach(inp => inp.value = BUDGET[inp.dataset.field]);

    // Navigation
    document.querySelectorAll('.nav-tab').forEach(tab => {
      tab.addEventListener('click', () => showSection(tab.dataset.section));
    });

    // Skill search
    document.getElementById('skillSearch')?.addEventListener('input', e => renderSkills(e.target.value));

    // Task enter
    document.getElementById('newTaskInput')?.addEventListener('keypress', e => { if (e.key === 'Enter') addNewTask(); });

    // Session timer
    document.getElementById('sessionTime').textContent = totalMinutes + ' min';
    setInterval(() => { totalMinutes++; localStorage.setItem('kgt_session', totalMinutes); document.getElementById('sessionTime').textContent = totalMinutes + ' min'; }, 60000);
  });

  // ============= NAVIGATION =============
  function showSection(name) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
    document.getElementById(name + '-section').classList.add('active');
    document.querySelector(`[data-section="${name}"]`).classList.add('active');
  }

  // ============= OVERVIEW =============
  function renderOverview() {
    // Alerts
    const alerts = [
      { icon: "üí∞", msg: `Bud≈ºet miesiƒôczny: $${BUDGET.total} | AI: $${BUDGET.ai}, CF: $${BUDGET.cf}, Buffer: $${BUDGET.buffer}`, severity: "info" },
      { icon: "ü§ñ", msg: "Agent JIMBO ‚Äî MOA Pipeline active. 3 writery + krytyk + agregator.", severity: "low" },
      { icon: "üìä", msg: "Koszt per opis produktu: ~$0.15‚Äì$0.25 (5 modeli w pipeline)", severity: "low" }
    ];
    document.getElementById('alertsArea').innerHTML = alerts.map(a =>
      `<div class="alert-item alert-${a.severity}"><span class="alert-icon">${a.icon}</span><span class="alert-msg">${a.msg}</span></div>`
    ).join('');

    // Donut ‚Äî cost per product breakdown
    const donutData = [
      { label: "DeepSeek R1 (SEO)", pct: 12, color: "#10b981" },
      { label: "Claude Sonnet 4 (Tech)", pct: 35, color: "#7c3aed" },
      { label: "GPT-4o (Marketing)", pct: 28, color: "#3b82f6" },
      { label: "Gemini Flash (Critic)", pct: 5, color: "#fbbf24" },
      { label: "Claude 4.5 (Aggregator)", pct: 20, color: "#ef4444" }
    ];
    let grad = '', cum = 0, legend = '';
    donutData.forEach(d => {
      grad += `${d.color} ${cum}% ${cum + d.pct}%,`;
      cum += d.pct;
      legend += `<div class="donut-legend-item"><span class="donut-legend-dot" style="background:${d.color}"></span>${d.label} (${d.pct}%)</div>`;
    });
    document.getElementById('overviewDonut').style.background = `conic-gradient(${grad.slice(0, -1)})`;
    document.getElementById('overviewDonutLegend').innerHTML = legend;

    // CF quick breakdown
    const cs = CF_COST_SUMMARY;
    const pct = ((cs.total / cs.budget) * 100).toFixed(0);
    document.getElementById('cfQuickBreakdown').innerHTML = `
      <table class="dtable">
        <tbody>
          <tr class="dr"><td class="w">Workers</td><td class="r cost">$${cs.workers.toFixed(2)}</td></tr>
          <tr class="dr"><td class="w">D1 Databases</td><td class="r cost">$${cs.d1.toFixed(2)}</td></tr>
          <tr class="dr"><td class="w">R2 Storage</td><td class="r cost">$${cs.r2.toFixed(2)}</td></tr>
          <tr class="dr"><td class="w">KV Namespaces</td><td class="r cost">$${cs.kv.toFixed(2)}</td></tr>
          <tr class="dr"><td class="w">Hyperdrive</td><td class="r cost">$${cs.hyperdrive.toFixed(2)}</td></tr>
        </tbody>
      </table>
      <div style="margin-top:12px; display:flex; justify-content:space-between; font:12px var(--sans);">
        <span style="color:var(--text-secondary);">Total: <strong style="color:var(--accent-primary);">$${cs.total.toFixed(2)}</strong></span>
        <span style="color:var(--text-muted);">Budget: $${cs.budget}</span>
        <span style="color:var(--accent-success);">Remaining: $${(cs.budget - cs.total).toFixed(2)} (${pct}% used)</span>
      </div>
      <div style="margin-top:8px; height:6px; background:rgba(255,255,255,0.05); border-radius:3px; overflow:hidden;">
        <div style="width:${pct}%; height:100%; background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary)); border-radius:3px;"></div>
      </div>
    `;
  }

  // ============= MODELS =============
  function renderModels() {
    const tierBadge = t => `<span class="badge badge-${t}">${t}</span>`;
    const statusBadge = s => `<span class="badge badge-${s}">${s}</span>`;

    // Table
    document.getElementById('modelsBody').innerHTML = MODELS.map(m => `
      <tr class="dr">
        <td class="w">${m.name}</td>
        <td>${m.role}</td>
        <td>${m.provider}</td>
        <td class="r cost">$${m.input.toFixed(2)}</td>
        <td class="r cost">${m.output !== null ? '$' + m.output.toFixed(2) : '‚Äî'}</td>
        <td class="r">${m.cache !== null ? '$' + m.cache.toFixed(2) : '‚Äî'}</td>
        <td class="r">${m.context}</td>
        <td class="r">${m.maxTokens ? m.maxTokens.toLocaleString() : '‚Äî'}</td>
        <td>${statusBadge(m.status)}</td>
        <td>${tierBadge(m.tier)}</td>
      </tr>
    `).join('');

    // Price cards
    document.getElementById('priceCards').innerHTML = MODELS.filter(m => m.output !== null).map(m => `
      <div class="model-card">
        ${tierBadge(m.tier)}
        <div class="model-name">${m.name}</div>
        <div class="model-provider">${m.provider}</div>
        <div class="model-price">$${m.input.toFixed(2)}</div>
        <div class="model-price-unit">per 1M input</div>
        <div style="font:11px var(--sans); color:var(--text-muted); margin-top:4px;">
          Output: $${m.output.toFixed(2)}/1M
        </div>
        <div style="font:10px var(--mono); color:var(--text-muted); margin-top:4px;">
          ${m.role}
        </div>
      </div>
    `).join('');

    // OpenClaw models
    document.getElementById('openclawModelsGrid').innerHTML = OPENCLAW_MODELS.map(m => `
      <div class="model-card">
        <span class="badge badge-${m.status}">${m.status}</span>
        <div class="model-name">${m.name}</div>
        <div class="model-provider">${m.provider}</div>
        <div style="font:10px var(--mono); color:var(--text-muted); margin-top:6px;">${m.id}</div>
      </div>
    `).join('');
  }

  function calculateCosts() {
    const inp = parseInt(document.getElementById('calcInput').value) || 0;
    const out = parseInt(document.getElementById('calcOutput').value) || 0;
    let html = '<div class="scroll-x"><table class="dtable"><thead><tr><th>Model</th><th class="r">Input koszt</th><th class="r">Output koszt</th><th class="r">TOTAL</th></tr></thead><tbody>';
    MODELS.filter(m => m.output !== null).forEach(m => {
      const ic = (inp / 1000000) * m.input;
      const oc = (out / 1000000) * m.output;
      const total = ic + oc;
      html += `<tr class="dr"><td class="w">${m.name}</td><td class="r">$${ic.toFixed(4)}</td><td class="r">$${oc.toFixed(4)}</td><td class="r cost">$${total.toFixed(4)}</td></tr>`;
    });
    html += '</tbody></table></div>';
    document.getElementById('calcResults').innerHTML = html;
  }

  // ============= AI LIBRARY =============
  const CAT_LABELS = { stt:'üé§ Speech-to-Text', tts:'üîä Text-to-Speech', vision:'üëÅÔ∏è Vision/OCR', image:'üé® Image Gen', video:'üé¨ Video Gen', music:'üéµ Music/Audio', nlp:'üìù NLP/Translation', embed:'üìê Embeddings', safety:'üõ°Ô∏è Safety', multi:'üß© Multimodal' };
  const CAT_COLORS = { stt:'#10b981', tts:'#6366f1', vision:'#f59e0b', image:'#ec4899', video:'#ef4444', music:'#8b5cf6', nlp:'#3b82f6', embed:'#06b6d4', safety:'#22c55e', multi:'#f97316' };

  function renderAiLib(searchText, catFilter) {
    searchText = (searchText || '').toLowerCase();
    catFilter = catFilter || 'all';

    // Expert Models
    let models = EXPERT_MODELS;
    if (catFilter !== 'all') models = models.filter(m => m.cat === catFilter);
    if (searchText) models = models.filter(m => (m.name + m.provider + m.spec + m.cat).toLowerCase().includes(searchText));

    document.getElementById('expertModelsBody').innerHTML = models.map(m => {
      const col = CAT_COLORS[m.cat] || 'var(--accent-primary)';
      return `<tr class="dr">
        <td class="w" style="font:600 12px var(--sans);">${m.name}</td>
        <td><span class="badge" style="background:${col}20; color:${col}; border-color:${col}40;">${CAT_LABELS[m.cat] || m.cat}</span></td>
        <td style="font:11px var(--sans);">${m.provider}</td>
        <td class="r cost" style="font:12px var(--mono);">${m.price}</td>
        <td style="font:10px var(--mono); color:var(--text-muted);">${m.unit}</td>
        <td style="font:11px/1.4 var(--sans); color:var(--text-secondary); max-width:300px;">${m.spec}</td>
        <td style="font:11px; white-space:nowrap;">${m.quality}</td>
      </tr>`;
    }).join('');

    document.getElementById('ailibCount').textContent = models.length + ' / ' + EXPERT_MODELS.length + ' modeli';

    // AI Tools
    let tools = AI_TOOLS;
    if (searchText) tools = tools.filter(t => (t.name + t.cat + t.desc + t.tags.join(' ')).toLowerCase().includes(searchText));

    document.getElementById('aiToolsGrid').innerHTML = tools.map(t => `
      <div class="glass" style="margin:0; cursor:pointer; transition:all .2s;" onclick="window.open('${t.url}','_blank')" onmouseover="this.style.borderColor='var(--accent-primary)'" onmouseout="this.style.borderColor=''">
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
          <span style="font-size:24px;">${t.icon}</span>
          <div>
            <div style="font:700 14px/1 var(--sans); color:var(--text-primary);">${t.name}</div>
            <div style="font:600 9px/1 var(--mono); color:var(--accent-primary); text-transform:uppercase; margin-top:3px;">${t.cat}</div>
          </div>
        </div>
        <div style="font:11px/1.5 var(--sans); color:var(--text-secondary); margin-bottom:10px;">${t.desc}</div>
        <div style="display:flex; flex-wrap:wrap; gap:3px;">
          ${t.tags.map(tag => `<span class="badge badge-available" style="font:8px var(--mono);">${tag}</span>`).join('')}
        </div>
      </div>
    `).join('');

    // AI Providers
    let providers = AI_PROVIDERS;
    if (searchText) providers = providers.filter(p => (p.name + p.spec.join(' ') + p.strength).toLowerCase().includes(searchText));

    document.getElementById('aiProvidersGrid').innerHTML = `
      <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(340px,1fr)); gap:12px;">
        ${providers.map(p => `
          <div class="glass" style="margin:0; border-left:3px solid ${p.color}; cursor:pointer;" onclick="window.open('${p.url}','_blank')" onmouseover="this.style.boxShadow='0 0 20px ${p.color}30'" onmouseout="this.style.boxShadow=''">
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
              <span style="font-size:22px;">${p.icon}</span>
              <div style="font:700 16px/1 var(--sans); color:var(--text-primary);">${p.name}</div>
            </div>
            <div style="display:flex; flex-wrap:wrap; gap:4px; margin-bottom:10px;">
              ${p.spec.map(s => `<span class="badge" style="background:${p.color}15; color:${p.color}; border-color:${p.color}30; font:9px var(--mono);">${s}</span>`).join('')}
            </div>
            <div style="font:11px/1.5 var(--sans); color:var(--text-secondary); margin-bottom:8px;">${p.strength}</div>
            <div style="font:10px var(--mono); color:var(--text-muted);">üí∞ ${p.pricing}</div>
          </div>
        `).join('')}
      </div>
    `;

    // Use Cases
    document.getElementById('aiUseCases').innerHTML = `
      <div class="scroll-x">
        <table class="dtable">
          <thead><tr><th>Zadanie</th><th>üèÜ Best Choice</th><th>üîÑ Alternatywa</th><th>Dlaczego?</th></tr></thead>
          <tbody>
            ${AI_USE_CASES.map(u => `
              <tr class="dr">
                <td class="w" style="font:600 12px var(--sans);">${u.task}</td>
                <td style="font:12px var(--mono); color:var(--accent-success);">${u.best}</td>
                <td style="font:12px var(--mono); color:var(--text-secondary);">${u.alt}</td>
                <td style="font:11px/1.4 var(--sans); color:var(--text-muted); max-width:350px;">${u.why}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      </div>
    `;
  }

  function filterAiLib() {
    const search = document.getElementById('ailibSearch')?.value || '';
    const cat = document.getElementById('ailibCat')?.value || 'all';
    renderAiLib(search, cat);
  }

  // ============= CLOUDFLARE =============
  function renderCloudflare() {
    document.getElementById('cfWorkersBody').innerHTML = CF_WORKERS.map(w => `
      <tr class="dr"><td class="w">${w.name}</td><td>${w.desc}</td><td style="font:11px var(--mono); color:var(--accent-primary);">${w.route}</td><td class="r">${w.reqDay.toLocaleString()}</td><td class="r cost">${w.est}</td></tr>
    `).join('');

    document.getElementById('cfD1Body').innerHTML = CF_D1.map(d => `
      <tr class="dr"><td class="w">${d.name}</td><td>${d.desc}</td><td class="r">${d.size}</td><td class="r">${d.qDay.toLocaleString()}</td><td class="r cost">${d.est}</td></tr>
    `).join('');

    document.getElementById('cfR2Body').innerHTML = CF_R2.map(r => `
      <tr class="dr"><td class="w">${r.name}</td><td>${r.desc}</td><td class="r">${r.size}</td><td class="r">${r.objects.toLocaleString()}</td><td class="r cost">${r.est}</td></tr>
    `).join('');

    document.getElementById('cfKVBody').innerHTML = CF_KV.map(k => `
      <tr class="dr"><td class="w">${k.name}</td><td>${k.desc}</td><td class="r">${k.keys}</td><td class="r cost">${k.est}</td></tr>
    `).join('');

    document.getElementById('cfHyperBody').innerHTML = CF_HYPER.map(h => `
      <tr class="dr"><td class="w">${h.name}</td><td>${h.db}</td><td class="r">${h.connections}</td><td class="r">${h.reqDay.toLocaleString()}</td><td class="r cost">${h.est}</td></tr>
    `).join('');

    // Summary
    const cs = CF_COST_SUMMARY;
    document.getElementById('cfCostSummary').innerHTML = `
      <div class="grid-3">
        <div>
          <table class="dtable">
            <tbody>
              <tr class="dr"><td class="w">Workers</td><td class="r cost">$${cs.workers.toFixed(2)}</td></tr>
              <tr class="dr"><td class="w">D1 Databases</td><td class="r cost">$${cs.d1.toFixed(2)}</td></tr>
              <tr class="dr"><td class="w">R2 Storage</td><td class="r cost">$${cs.r2.toFixed(2)}</td></tr>
              <tr class="dr"><td class="w">KV Namespaces</td><td class="r cost">$${cs.kv.toFixed(2)}</td></tr>
              <tr class="dr"><td class="w">Hyperdrive</td><td class="r cost">$${cs.hyperdrive.toFixed(2)}</td></tr>
            </tbody>
          </table>
        </div>
        <div style="display:flex; flex-direction:column; justify-content:center; align-items:center; gap:8px;">
          <div style="font: 700 32px/1 var(--sans); color:var(--accent-primary);">$${cs.total.toFixed(2)}</div>
          <div style="font: 11px var(--mono); color: var(--text-muted);">ESTIMATED MONTHLY</div>
          <div style="font: 13px var(--sans); color: var(--accent-success);">$${(cs.budget - cs.total).toFixed(2)} remaining</div>
        </div>
        <div style="font: 12px/1.8 var(--sans); color: var(--text-secondary);">
          <strong>Uwagi:</strong><br>
          ‚Ä¢ Workers Paid plan: $5/mies. minimum<br>
          ‚Ä¢ D1: generousny free tier<br>
          ‚Ä¢ R2: bardzo niskie koszty storage<br>
          ‚Ä¢ KV: minimalny koszt sessions<br>
          ‚Ä¢ Hyperdrive: warto≈õciowy dla PostgreSQL
        </div>
      </div>
    `;
  }

  // ============= MOA PIPELINE =============
  function renderMOA() {
    // Pipeline flow
    document.getElementById('pipelineFlow').innerHTML = MOA_STAGES.map((s, i) => {
      const arrow = i < MOA_STAGES.length - 1 ? '<span class="pipeline-arrow">‚Üí</span>' : '';
      return `<div class="pipeline-stage" title="${s.desc} (${s.timeout})">${s.name}<br><span style="font:10px var(--mono); color:var(--text-muted);">${s.timeout}</span></div>${arrow}`;
    }).join('');

    // Writers
    const writers = [
      { model: "DeepSeek R1:8b", role: "SEO Writer", focus: "S≈Çowa kluczowe, meta, H1-H3", temp: 0.7, color: "var(--accent-success)" },
      { model: "Claude Sonnet 4", role: "Technical Writer", focus: "Parametry, materia≈Çy, certyfikaty", temp: 0.5, color: "var(--accent-secondary)" },
      { model: "GPT-4o", role: "Marketing Writer", focus: "Emocje, korzy≈õci, CTA", temp: 0.8, color: "var(--accent-primary)" }
    ];
    document.getElementById('moaWriters').innerHTML = writers.map(w => `
      <div class="glass" style="border-top: 2px solid ${w.color}; margin:0;">
        <div style="font: 700 14px/1 var(--sans); color: var(--text-primary); margin-bottom:8px;">${w.model}</div>
        <div style="font: 600 11px/1 var(--mono); color: ${w.color}; margin-bottom:10px;">${w.role}</div>
        <div style="font: 12px/1.6 var(--sans); color: var(--text-secondary);">
          Focus: ${w.focus}<br>
          Temperature: ${w.temp}<br>
          Parallel: ‚úÖ
        </div>
      </div>
    `).join('');

    // Critic
    document.getElementById('moaCritic').innerHTML = `
      <div style="font: 13px/1.7 var(--sans); color: var(--text-secondary);">
        <strong style="color:var(--text-primary);">Gemini 2.0 Flash Thinking</strong><br>
        Max iterations: 2<br>
        Quality threshold: 0.85<br>
        Temperature: 0.3<br>
        Thinking budget: 24576 tokens<br>
        Context window: 1M tokens
      </div>
    `;

    // Aggregator
    document.getElementById('moaAggregator').innerHTML = `
      <div style="font: 13px/1.7 var(--sans); color: var(--text-secondary);">
        <strong style="color:var(--text-primary);">Claude Sonnet 4.5</strong><br>
        Method: Synthesis<br>
        Temperature: 0.4<br>
        Context window: 200K tokens<br>
        Output: Markdown (PL)<br>
        Includes: gen info, model versions, cost estimate
      </div>
    `;

    // Criteria
    document.getElementById('moaCriteriaBody').innerHTML = MOA_CRITERIA.map(c => `
      <tr class="dr"><td class="w">${c.name}</td><td>${c.desc}</td><td class="r" style="color:var(--accent-primary);">${c.target}</td><td class="r">${(c.weight * 100).toFixed(0)}%</td></tr>
    `).join('');

    // Monitoring
    document.getElementById('moaMonitoring').innerHTML = `
      <div class="grid-2">
        <div>
          <div class="section-label">Metryki</div>
          <div style="display:flex; flex-wrap:wrap; gap:6px;">
            ${["latency", "token_usage", "cost", "quality_scores"].map(m => `<span class="badge badge-available">${m}</span>`).join('')}
          </div>
        </div>
        <div>
          <div class="section-label">Alerty</div>
          <div style="font: 12px/1.8 var(--sans); color: var(--text-secondary);">
            ‚ö†Ô∏è cost > $1/product ‚Üí notify<br>
            ‚ö†Ô∏è quality_score < 0.8 ‚Üí retry<br>
            ‚ö†Ô∏è latency > 120s ‚Üí notify
          </div>
        </div>
      </div>
      <div style="margin-top:12px;">
        <div class="section-label">Cache & Retry</div>
        <div style="font: 12px/1.6 var(--sans); color: var(--text-secondary);">
          Cache: Redis, TTL 3600s | Retry: max 3 attempts, exponential backoff (2s base) | Rate limit: 60 req/min, 100K tokens/min
        </div>
      </div>
    `;
  }

  // ============= SKILLS (ACCORDION) =============
  function renderSkills(search = '') {
    const container = document.getElementById('skillsAccordion');
    let html = '';
    const term = search.toLowerCase();
    let totalVisible = 0;

    Object.entries(SKILLS).forEach(([category, items]) => {
      const filtered = items.filter(s => term === '' || s.name.includes(term) || s.desc.toLowerCase().includes(term));
      if (filtered.length === 0) return;
      totalVisible += filtered.length;

      const isOpen = term !== '';
      html += `
        <div class="skill-category-header ${isOpen ? 'open' : ''}" onclick="toggleSkillCategory(this)">
          <span class="skill-category-title">${category}</span>
          <span><span class="skill-category-count">${filtered.length} skills</span> <span class="skill-category-arrow">‚ñº</span></span>
        </div>
        <div class="skill-category-body ${isOpen ? 'open' : ''}">
          ${filtered.map(s => {
            const isActive = activatedSkills.has(s.name);
            return `<span class="skill-tag ${isActive ? 'active' : ''}" onclick="activateSkill('${s.name}')" title="${s.desc}">${s.name}</span>`;
          }).join('')}
        </div>
      `;
    });
    container.innerHTML = html || '<div style="text-align:center; padding:40px; color:var(--text-muted);">Brak skilli pasujƒÖcych do wyszukiwania</div>';
  }

  function toggleSkillCategory(el) {
    el.classList.toggle('open');
    el.nextElementSibling.classList.toggle('open');
  }

  function activateSkill(name) {
    activatedSkills.add(name);
    localStorage.setItem('kgt_skills', JSON.stringify([...activatedSkills]));
    const cmd = `Use the ${name} skill for this task`;
    navigator.clipboard.writeText(cmd).then(() => {
      showToast('Skill Activated', `"${name}" ‚Äî command copied`);
      renderSkills(document.getElementById('skillSearch')?.value || '');
      updateStats();
    });
  }

  // ============= TASKS =============
  function renderTasks() {
    const list = document.getElementById('taskList');
    if (!list) return;
    if (tasks.length === 0) { list.innerHTML = '<li style="text-align:center; padding:30px; color:var(--text-muted);">Brak zada≈Ñ</li>'; updateStats(); return; }
    list.innerHTML = tasks.map((t, i) => `
      <li class="task-item ${t.completed ? 'completed' : ''}">
        <input type="checkbox" class="task-checkbox" ${t.completed ? 'checked' : ''} onchange="toggleTask(${i})">
        <span class="task-text">${t.text}</span>
        <span class="task-tag priority-${t.priority}">${t.priority}</span>
        <button class="task-btn" onclick="deleteTask(${i})">‚úï</button>
      </li>
    `).join('');
    updateStats();
  }

  function addNewTask() {
    const input = document.getElementById('newTaskInput');
    const text = input.value.trim();
    if (!text) return;
    tasks.unshift({ text, priority: document.getElementById('newTaskPriority').value, completed: false });
    saveTasks(); input.value = ''; renderTasks();
    showToast('Dodano', text);
  }

  function toggleTask(i) { tasks[i].completed = !tasks[i].completed; saveTasks(); renderTasks(); }
  function deleteTask(i) { tasks.splice(i, 1); saveTasks(); renderTasks(); }
  function clearCompletedTasks() { tasks = tasks.filter(t => !t.completed); saveTasks(); renderTasks(); showToast('OK', 'Usuniƒôto uko≈Ñczone'); }
  function saveTasks() { localStorage.setItem('kgt_tasks', JSON.stringify(tasks)); }

  // ============= DOD =============
  function renderDoD() {
    const list = document.getElementById('dodList');
    if (!list) return;
    list.innerHTML = dodItems.map((item, i) => `
      <li class="dod-item ${item.checked ? 'checked' : ''}">
        <input type="checkbox" class="task-checkbox" ${item.checked ? 'checked' : ''} onchange="toggleDoD(${i})">
        <label>${item.text}</label>
      </li>
    `).join('');
  }

  function toggleDoD(i) { dodItems[i].checked = !dodItems[i].checked; localStorage.setItem('kgt_dod', JSON.stringify(dodItems)); renderDoD(); }
  function resetDoD() { dodItems = DEFAULT_DOD.map(t => ({ text: t, checked: false })); localStorage.setItem('kgt_dod', JSON.stringify(dodItems)); renderDoD(); showToast('Reset', 'DoD reset'); }

  // ============= AGENT ZERO =============
  function renderAgent() {
    document.getElementById('agentProfiles').innerHTML = AGENTS.map(a => {
      const isJimbo = a === 'jimbo';
      return `<span class="skill-tag ${isJimbo ? 'active' : ''}" style="cursor:default;">${a}</span>`;
    }).join('');

    document.getElementById('providersBody').innerHTML = PROVIDERS.map(p => `
      <tr class="dr"><td class="w" style="font:11px var(--mono);">${p.id}</td><td>${p.name}</td><td>${p.litellm}</td><td style="font:11px var(--sans); color:var(--text-muted);">${p.note}</td></tr>
    `).join('');

    document.getElementById('mcpServersList').innerHTML = MCP_SERVERS.map(s => `
      <span class="skill-tag active" style="cursor:default;">${s}</span>
    `).join('');
  }

  // ============= AGENT ZERO DOCS =============
  function renderAgentDocs() {
    // Docs grid
    let docsHtml = '';
    Object.entries(A0_DOCS).forEach(([group, docs]) => {
      const color = group.includes('Quick') ? 'var(--accent-success)' : group.includes('User') ? 'var(--accent-primary)' : 'var(--accent-secondary)';
      docsHtml += `<div><div class="section-label" style="color:${color};">${group}</div>`;
      docs.forEach(d => {
        docsHtml += `<div style="font:12px/1.8 var(--sans); color:var(--text-secondary); padding:4px 0; border-bottom:1px solid var(--border-light);">
          <strong style="color:var(--text-primary);">${d.title}</strong><br>
          <span style="font-size:11px;">${d.desc}</span>
        </div>`;
      });
      docsHtml += '</div>';
    });
    document.getElementById('a0DocsGrid').innerHTML = docsHtml;

    // Architecture components
    document.getElementById('a0ArchOverview').innerHTML = `
      <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:10px;">
        ${A0_ARCH_COMPONENTS.map(c => `
          <div class="glass" style="margin:0; text-align:center; padding:16px;">
            <div style="font-size:28px; margin-bottom:8px;">${c.icon}</div>
            <div style="font:700 13px/1 var(--sans); color:var(--text-primary); margin-bottom:6px;">${c.name}</div>
            <div style="font:11px/1.5 var(--sans); color:var(--text-secondary);">${c.desc}</div>
          </div>
        `).join('')}
      </div>
    `;

    // API endpoints
    document.getElementById('a0Connectivity').innerHTML = `
      <div class="scroll-x">
        <table class="dtable">
          <thead><tr><th>Method</th><th>Endpoint</th><th>Opis</th></tr></thead>
          <tbody>
            ${A0_API_ENDPOINTS.map(e => {
              const methodColor = e.method === 'POST' ? 'var(--accent-success)' : e.method === 'GET' ? 'var(--accent-primary)' : e.method === 'SSE' ? 'var(--accent-warning)' : e.method === 'A2A' ? 'var(--accent-secondary)' : 'var(--accent-orange)';
              return `<tr class="dr"><td><span class="badge" style="background:${methodColor}20; color:${methodColor}; border-color:${methodColor}40;">${e.method}</span></td><td class="w" style="font:11px var(--mono);">${e.path}</td><td>${e.desc}</td></tr>`;
            }).join('')}
          </tbody>
        </table>
      </div>
      <div style="margin-top:12px; font:12px/1.6 var(--sans); color:var(--text-secondary);">
        <strong>Auth:</strong> X-API-KEY header (auto-generated from username/password)<br>
        <strong>MCP URL format:</strong> <code style="color:var(--accent-primary); font:11px var(--mono);">http://HOST:PORT/mcp/sse</code> lub <code style="color:var(--accent-primary); font:11px var(--mono);">/mcp/http/</code><br>
        <strong>A2A URL format:</strong> <code style="color:var(--accent-secondary); font:11px var(--mono);">http://HOST:PORT/a2a/t-TOKEN/p-PROJECT</code>
      </div>
    `;

    // Extension points
    document.getElementById('a0Extensions').innerHTML = `
      <div style="margin-bottom:12px;">
        <div class="section-label">Extension Points (lifecycle hooks)</div>
        <div style="display:flex; flex-wrap:wrap; gap:6px;">
          ${A0_EXTENSION_POINTS.map(e => `<span class="badge badge-available" style="font:10px var(--mono);">${e}</span>`).join('')}
        </div>
      </div>
      <div class="grid-2">
        <div>
          <div class="section-label">Tworzenie rozszerze≈Ñ</div>
          <div style="font:12px/1.8 var(--sans); color:var(--text-secondary);">
            1. Plik <code style="color:var(--accent-primary);">agents/&lt;profile&gt;/extensions/</code><br>
            2. Override logic: agent-specific ‚Üí default merge<br>
            3. Custom tools: <code style="color:var(--accent-primary);">python/tools/</code> + prompt MD<br>
            4. Prompts: <code style="color:var(--accent-primary);">{{var}}</code> + <code style="color:var(--accent-primary);">{{ include "path" }}</code>
          </div>
        </div>
        <div>
          <div class="section-label">Kluczowe pliki</div>
          <div style="font:12px/1.8 var(--sans); color:var(--text-secondary);">
            <code style="color:var(--accent-primary);">usr/settings.json</code> ‚Äî main config<br>
            <code style="color:var(--accent-primary);">usr/secrets.env</code> ‚Äî credentials<br>
            <code style="color:var(--accent-primary);">conf/model_providers.yaml</code> ‚Äî providers<br>
            <code style="color:var(--accent-primary);">agent.py</code> ‚Äî core agent implementation
          </div>
        </div>
      </div>
    `;
  }

  // ============= OPTIMAISER =============
  function renderOptimaiser() {
    // Components grid
    document.getElementById('optimaiserComponents').innerHTML = OPTIMAISER_COMPONENTS.map(c => {
      const typeColors = { core: 'var(--accent-primary)', console: 'var(--accent-success)', gui: 'var(--accent-secondary)', dashboard: 'var(--accent-gold)' };
      return `
        <div class="glass" style="margin:0; border-top:2px solid ${typeColors[c.type]};">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
            <span style="font:700 14px/1 var(--sans); color:var(--text-primary);">${c.name}</span>
            <span class="badge" style="background:${typeColors[c.type]}20; color:${typeColors[c.type]}; border-color:${typeColors[c.type]}40;">${c.type}</span>
          </div>
          <div style="font:12px/1.5 var(--sans); color:var(--text-secondary); margin-bottom:10px;">${c.desc}</div>
          <div style="font:10px var(--mono); color:var(--text-muted); margin-bottom:6px;">${c.lines} lines</div>
          <div style="display:flex; flex-wrap:wrap; gap:4px;">
            ${c.features.map(f => `<span class="badge badge-available" style="font:10px var(--mono);">${f}</span>`).join('')}
          </div>
        </div>
      `;
    }).join('');

    // EXE list
    document.getElementById('optimaiserExeList').innerHTML = `
      <div style="display:flex; flex-wrap:wrap; gap:10px;">
        ${OPTIMAISER_EXES.map(e => `
          <div class="glass" style="margin:0; flex:1; min-width:200px; text-align:center; padding:20px;">
            <div style="font-size:32px; margin-bottom:8px;">üíæ</div>
            <div style="font:700 13px/1 var(--sans); color:var(--text-primary); margin-bottom:6px;">${e.name}</div>
            <div style="font:11px/1.4 var(--sans); color:var(--text-secondary);">${e.desc}</div>
          </div>
        `).join('')}
      </div>
    `;

    // Features
    document.getElementById('optimaiserFeatures').innerHTML = OPTIMAISER_FEATURES.map(f => `
      <div class="glass" style="margin:0;">
        <div style="font-size:24px; margin-bottom:8px;">${f.icon}</div>
        <div style="font:700 14px/1 var(--sans); color:var(--text-primary); margin-bottom:10px;">${f.title}</div>
        <ul style="font:12px/1.8 var(--sans); color:var(--text-secondary); padding-left:16px;">
          ${f.items.map(i => `<li>${i}</li>`).join('')}
        </ul>
      </div>
    `).join('');

    // Dependencies
    document.getElementById('optimaiserDeps').innerHTML = `
      <div class="scroll-x">
        <table class="dtable">
          <thead><tr><th>Pakiet</th><th class="r">Wersja</th><th>Rola</th></tr></thead>
          <tbody>
            ${OPTIMAISER_DEPS.map(d => `<tr class="dr"><td class="w" style="font:11px var(--mono);">${d.pkg}</td><td class="r">${d.ver}</td><td>${d.role}</td></tr>`).join('')}
          </tbody>
        </table>
      </div>
    `;
  }

  // ============= LIVE OPTIMAISER =============
  const OPT_EXE_PATH = 'U:\\.workspace_meta\\jimbo-dashboard\\optimaiser\\dist';
  const OPT_LAUNCH_ITEMS = [
    { name: 'PC_Optimizer_GUI.exe', icon: 'üñ•Ô∏è', desc: 'Interfejs graficzny z wykresami CPU/RAM/GPU', color: 'var(--accent-secondary)' },
    { name: 'PC_Optimizer_Console.exe', icon: '‚å®Ô∏è', desc: 'Wersja tekstowa ‚Äî menu interaktywne', color: 'var(--accent-success)' },
    { name: 'PC_Optimizer_Dashboard.exe', icon: 'üìä', desc: 'Dashboard launcher ‚Äî monitoring + optymalizacja', color: 'var(--accent-gold)' }
  ];

  const OPT_QUICK_ACTIONS = [
    { title: 'üßπ Wyczy≈õƒá TEMP', desc: 'Usuwa pliki tymczasowe z %TEMP%, %TMP%, Windows\\Temp', cmd: 'Remove-Item "$env:TEMP\\*" -Recurse -Force -ErrorAction SilentlyContinue; Remove-Item "C:\\Windows\\Temp\\*" -Recurse -Force -ErrorAction SilentlyContinue; Write-Host "‚úÖ Temp cleaned!"' },
    { title: 'üåê Flush DNS', desc: 'Czy≈õci cache DNS systemu', cmd: 'ipconfig /flushdns' },
    { title: 'üóëÔ∏è Wyczy≈õƒá Kosz', desc: 'Opr√≥≈ºnia kosz systemowy', cmd: 'Clear-RecycleBin -Force -ErrorAction SilentlyContinue; Write-Host "‚úÖ Recycle bin cleared!"' },
    { title: 'üíæ Zwolnij RAM', desc: 'Garbage collect + memory trim', cmd: '[System.GC]::Collect(); [System.GC]::WaitForPendingFinalizers(); Write-Host "‚úÖ GC triggered"' },
    { title: 'üìä CPU & RAM Live', desc: 'Monitoring w czasie rzeczywistym co 2s', cmd: 'while($true){$c=Get-CimInstance Win32_Processor|Select -Exp LoadPercentage;$m=Get-CimInstance Win32_OperatingSystem;$ru=[math]::Round(($m.TotalVisibleMemorySize-$m.FreePhysicalMemory)/1MB,1);$rt=[math]::Round($m.TotalVisibleMemorySize/1MB,1);Write-Host ("[{0}] CPU: {1}% | RAM: {2}/{3} GB" -f (Get-Date -f "HH:mm:ss"),$c,$ru,$rt);Start-Sleep 2}' },
    { title: 'üèóÔ∏è Top 10 Procesy (RAM)', desc: 'Najwiƒôksze ≈ºar≈Çoki pamiƒôci', cmd: 'Get-Process | Sort-Object WorkingSet64 -Descending | Select-Object -First 10 Name,@{N="RAM_MB";E={[math]::Round($_.WorkingSet64/1MB,1)}},CPU,Id | Format-Table -AutoSize' },
    { title: 'üèóÔ∏è Top 10 Procesy (CPU)', desc: 'Najwiƒôksze obciƒÖ≈ºenie procesora', cmd: 'Get-Process | Sort-Object CPU -Descending | Select-Object -First 10 Name,@{N="CPU_s";E={[math]::Round($_.CPU,1)}},@{N="RAM_MB";E={[math]::Round($_.WorkingSet64/1MB,1)}},Id | Format-Table -AutoSize' },
    { title: 'üíø Dyski ‚Äî wolne miejsce', desc: 'Status wszystkich dysk√≥w', cmd: 'Get-PSDrive -PSProvider FileSystem | Select-Object Name,@{N="Used_GB";E={[math]::Round($_.Used/1GB,1)}},@{N="Free_GB";E={[math]::Round($_.Free/1GB,1)}},@{N="Total_GB";E={[math]::Round(($_.Used+$_.Free)/1GB,1)}} | Format-Table -AutoSize' },
    { title: 'üî• Kill Zombie Procesy', desc: 'Zamyka procesy z >500MB RAM (ostro≈ºnie!)', cmd: 'Get-Process | Where-Object {$_.WorkingSet64 -gt 500MB -and $_.ProcessName -notin @("explorer","svchost","System","csrss","dwm","RuntimeBroker")} | Select-Object Name,@{N="MB";E={[math]::Round($_.WorkingSet64/1MB)}} | Format-Table -AutoSize; Write-Host "‚ö†Ô∏è Dodaj | Stop-Process -Force na koncu jesli chcesz zabic"' },
    { title: 'üîå Autostart Programs', desc: 'Lista program√≥w startowych', cmd: 'Get-CimInstance Win32_StartupCommand | Select-Object Name,Command,Location | Format-Table -AutoSize -Wrap' },
    { title: 'üå°Ô∏è GPU Status (NVIDIA)', desc: 'Status GPU ‚Äî nvidia-smi', cmd: 'nvidia-smi --query-gpu=name,temperature.gpu,utilization.gpu,utilization.memory,memory.used,memory.total --format=csv,noheader,nounits' },
    { title: '‚è±Ô∏è System Uptime', desc: 'Czas dzia≈Çania systemu', cmd: '$os=Get-CimInstance Win32_OperatingSystem; $up=(Get-Date)-$os.LastBootUpTime; Write-Host ("Uptime: {0}d {1}h {2}m | Boot: {3}" -f $up.Days,$up.Hours,$up.Minutes,$os.LastBootUpTime.ToString("yyyy-MM-dd HH:mm"))' }
  ];

  const OPT_DEEP_PS = [
    { label: 'üîç Pe≈Çny System Info', cmd: 'Get-ComputerInfo | Select-Object CsName,WindowsVersion,WindowsBuildLabEx,OsArchitecture,CsTotalPhysicalMemory,CsNumberOfProcessors,CsNumberOfLogicalProcessors | Format-List' },
    { label: 'üìä CPU Load (real-time)', cmd: 'Get-CimInstance Win32_Processor | Select-Object Name,NumberOfCores,NumberOfLogicalProcessors,LoadPercentage,MaxClockSpeed' },
    { label: 'üíæ RAM Szczeg√≥≈Çy', cmd: '$os=Get-CimInstance Win32_OperatingSystem; [PSCustomObject]@{Total_GB=[math]::Round($os.TotalVisibleMemorySize/1MB,2);Free_GB=[math]::Round($os.FreePhysicalMemory/1MB,2);Used_GB=[math]::Round(($os.TotalVisibleMemorySize-$os.FreePhysicalMemory)/1MB,2);Pct_Used=[math]::Round(100-($os.FreePhysicalMemory/$os.TotalVisibleMemorySize*100),1)} | Format-List' },
    { label: 'üå°Ô∏è Temperatura CPU (Win)', cmd: 'Get-CimInstance MSAcpi_ThermalZoneTemperature -Namespace root/wmi -ErrorAction SilentlyContinue | Select-Object InstanceName,@{N="Temp_C";E={($_.CurrentTemperature-2732)/10}}' },
    { label: 'üì° Sieƒá ‚Äî interfejsy', cmd: 'Get-NetAdapter | Where-Object Status -eq Up | Select-Object Name,InterfaceDescription,LinkSpeed,MacAddress | Format-Table -AutoSize' },
    { label: 'üì° Sieƒá ‚Äî IP config', cmd: 'Get-NetIPAddress -AddressFamily IPv4 | Where-Object {$_.IPAddress -ne "127.0.0.1"} | Select-Object InterfaceAlias,IPAddress,PrefixLength | Format-Table -AutoSize' },
    { label: 'üîí Otwarte porty', cmd: 'Get-NetTCPConnection -State Listen | Select-Object LocalPort,@{N="Process";E={(Get-Process -Id $_.OwningProcess -ErrorAction SilentlyContinue).ProcessName}} | Sort-Object LocalPort | Format-Table -AutoSize' },
    { label: 'üß© Zainstalowane programy', cmd: 'Get-CimInstance Win32_Product | Select-Object Name,Version,Vendor | Sort-Object Name | Format-Table -AutoSize' },
    { label: 'üìã Us≈Çugi ‚Äî dzia≈ÇajƒÖce', cmd: 'Get-Service | Where-Object Status -eq Running | Select-Object Name,DisplayName,StartType | Sort-Object DisplayName | Format-Table -AutoSize' },
    { label: 'üîÑ Ostatnie Windows Updates', cmd: 'Get-HotFix | Sort-Object InstalledOn -Descending | Select-Object -First 10 HotFixID,Description,InstalledOn | Format-Table -AutoSize' },
    { label: 'üõ°Ô∏è Firewall Status', cmd: 'Get-NetFirewallProfile | Select-Object Name,Enabled,DefaultInboundAction,DefaultOutboundAction | Format-Table -AutoSize' },
    { label: '‚ö° Power Plan', cmd: 'powercfg /getactivescheme; powercfg /list' }
  ];

  let optLiveInterval = null;
  let optHeapHistory = [];
  let optLiveRunning = true;

  function initLiveOptimiser() {
    // Launch grid
    document.getElementById('optLaunchGrid').innerHTML = OPT_LAUNCH_ITEMS.map(e => `
      <div class="opt-launch-btn" onclick="navigator.clipboard.writeText('start &quot;&quot; &quot;${OPT_EXE_PATH}\\\\${e.name}&quot;'); this.style.borderColor='var(--accent-success)'; setTimeout(()=>this.style.borderColor='',1500);" title="Kliknij = kopiuj komendƒô START do schowka">
        <div style="font-size:36px; margin-bottom:10px;">${e.icon}</div>
        <div style="font:700 14px/1 var(--sans); color:var(--text-primary); margin-bottom:6px;">${e.name}</div>
        <div style="font:11px/1.4 var(--sans); color:var(--text-secondary); margin-bottom:10px;">${e.desc}</div>
        <div style="font:9px var(--mono); color:${e.color}; padding:4px 8px; background:var(--bg-primary); border-radius:3px; display:inline-block;">start "" "${OPT_EXE_PATH}\\${e.name}"</div>
      </div>
    `).join('');

    // Quick Actions
    document.getElementById('optQuickActions').innerHTML = OPT_QUICK_ACTIONS.map(a => `
      <div class="opt-action-card" onclick="navigator.clipboard.writeText(\`${a.cmd.replace(/`/g,'\\`')}\`); this.style.borderColor='var(--accent-success)'; this.querySelector('.opt-action-title').textContent='‚úÖ Skopiowano!'; setTimeout(()=>{this.style.borderColor=''; this.querySelector('.opt-action-title').textContent='${a.title}';},1500);">
        <div class="opt-action-title">${a.title}</div>
        <div class="opt-action-desc">${a.desc}</div>
        <div class="opt-action-cmd">${a.cmd.length > 80 ? a.cmd.substring(0,80)+'...' : a.cmd}</div>
      </div>
    `).join('');

    // Deep Monitor PS commands
    document.getElementById('optDeepMonitor').innerHTML = OPT_DEEP_PS.map(p => `
      <div class="opt-ps-cmd" onclick="navigator.clipboard.writeText(\`${p.cmd.replace(/`/g,'\\`')}\`); this.style.borderColor='var(--accent-success)'; setTimeout(()=>this.style.borderColor='',1000);" title="Kliknij = kopiuj">
        <span style="color:var(--text-secondary); font:700 11px var(--sans);">${p.label}</span><br>
        <span style="color:var(--accent-primary); font:10px var(--mono);">${p.cmd.length > 120 ? p.cmd.substring(0,120)+'‚Ä¶' : p.cmd}</span>
      </div>
    `).join('');

    // Start live monitoring
    refreshLiveMetrics();
    optLiveInterval = setInterval(refreshLiveMetrics, 2000);
  }

  async function refreshLiveMetrics() {
    // CPU cores
    const cores = navigator.hardwareConcurrency || '?';
    document.getElementById('optCpuCores').textContent = cores + ' threads';

    // RAM (approximate via deviceMemory)
    const ram = navigator.deviceMemory ? navigator.deviceMemory + ' GB' : 'N/A';
    document.getElementById('optRam').textContent = ram;

    // Storage
    try {
      const est = await navigator.storage.estimate();
      const usedGB = (est.usage / (1024**3)).toFixed(2);
      const quotaGB = (est.quota / (1024**3)).toFixed(1);
      document.getElementById('optStorage').textContent = usedGB + ' / ' + quotaGB + ' GB';
    } catch { document.getElementById('optStorage').textContent = 'N/A'; }

    // Battery
    try {
      const bat = await navigator.getBattery();
      const pct = Math.round(bat.level * 100);
      const charging = bat.charging ? '‚ö°' : 'üîã';
      document.getElementById('optBattery').textContent = charging + ' ' + pct + '%';
      document.getElementById('optBattery').style.color = pct < 20 ? 'var(--accent-error)' : pct < 50 ? 'var(--accent-warning)' : 'var(--accent-success)';
    } catch { document.getElementById('optBattery').textContent = 'N/A'; }

    // Network
    const conn = navigator.connection || navigator.mozConnection;
    if (conn) {
      document.getElementById('optNetwork').textContent = (conn.downlink || '?') + ' Mbps (' + (conn.effectiveType || '?') + ')';
    } else {
      document.getElementById('optNetwork').textContent = navigator.onLine ? 'üü¢ Online' : 'üî¥ Offline';
    }

    // Screen
    document.getElementById('optScreen').textContent = screen.width + 'x' + screen.height;
    document.getElementById('optColorDepth').textContent = screen.colorDepth + '-bit';

    // JS Heap (Chrome only)
    if (performance.memory) {
      const heapUsed = (performance.memory.usedJSHeapSize / (1024**2)).toFixed(1);
      const heapTotal = (performance.memory.totalJSHeapSize / (1024**2)).toFixed(1);
      document.getElementById('optHeapUsed').textContent = heapUsed + ' MB';
      document.getElementById('optHeapTotal').textContent = heapTotal + ' MB';

      // History
      optHeapHistory.push(parseFloat(heapUsed));
      if (optHeapHistory.length > 30) optHeapHistory.shift();
      renderHeapChart();
    } else {
      document.getElementById('optHeapUsed').textContent = 'N/A';
      document.getElementById('optHeapTotal').textContent = 'N/A';
    }

    // Page load time
    const nav = performance.getEntriesByType('navigation')[0];
    if (nav) {
      document.getElementById('optPageLoad').textContent = Math.round(nav.loadEventEnd - nav.startTime) + ' ms';
    }

    // DOM Nodes
    document.getElementById('optDomNodes').textContent = document.querySelectorAll('*').length;

    // Uptime (page)
    const upSec = Math.round(performance.now() / 1000);
    const upMin = Math.floor(upSec / 60);
    const upH = Math.floor(upMin / 60);
    document.getElementById('optUptime').textContent = upH > 0 ? upH + 'h ' + (upMin%60) + 'm' : upMin + 'm ' + (upSec%60) + 's';
  }

  function renderHeapChart() {
    if (!optHeapHistory.length) return;
    const max = Math.max(...optHeapHistory, 1);
    const height = 8;
    const bars = '‚ñÅ‚ñÇ‚ñÉ‚ñÑ‚ñÖ‚ñÜ‚ñá‚ñà';
    const chart = optHeapHistory.map(v => {
      const idx = Math.min(Math.round((v / max) * (bars.length - 1)), bars.length - 1);
      return bars[idx];
    }).join('');
    const lastVal = optHeapHistory[optHeapHistory.length - 1].toFixed(1);
    document.getElementById('optHeapChart').textContent = chart + '  ' + lastVal + ' MB (max: ' + max.toFixed(1) + ' MB)';
  }

  function toggleLiveMonitor() {
    optLiveRunning = !optLiveRunning;
    if (optLiveRunning) {
      optLiveInterval = setInterval(refreshLiveMetrics, 2000);
      refreshLiveMetrics();
      document.getElementById('optLiveStatus').textContent = 'LIVE';
      document.getElementById('optLiveStatus').style.color = 'var(--accent-success)';
      document.getElementById('optLiveIndicator').style.background = 'var(--accent-success)';
      document.getElementById('optLiveIndicator').style.animation = 'pulse 1.5s infinite';
      document.getElementById('optToggleBtn').textContent = '‚è∏Ô∏è';
    } else {
      clearInterval(optLiveInterval);
      document.getElementById('optLiveStatus').textContent = 'PAUSED';
      document.getElementById('optLiveStatus').style.color = 'var(--accent-warning)';
      document.getElementById('optLiveIndicator').style.background = 'var(--accent-warning)';
      document.getElementById('optLiveIndicator').style.animation = 'none';
      document.getElementById('optToggleBtn').textContent = '‚ñ∂Ô∏è';
    }
  }

  function copyAllOptPS() {
    const all = OPT_DEEP_PS.map(p => '# ' + p.label + '\n' + p.cmd).join('\n\n');
    navigator.clipboard.writeText(all);
  }

  // ============= NET CONTROL =============
  function renderNetCtrl() {
    // Overview
    document.getElementById('netctrlOverview').innerHTML = `
      <div class="glass" style="margin:0; text-align:center; padding:20px;">
        <div style="font-size:28px;">üõ°Ô∏è</div>
        <div style="font:700 28px/1 var(--sans); color:var(--accent-primary); margin:8px 0;">4</div>
        <div style="font:11px var(--mono); color:var(--text-muted);">MOCK SERVICES</div>
        <div style="font:10px var(--sans); color:var(--text-secondary); margin-top:4px;">nginx, fastapi, redis, dev-srv</div>
      </div>
      <div class="glass" style="margin:0; text-align:center; padding:20px;">
        <div style="font-size:28px;">üåê</div>
        <div style="font:700 28px/1 var(--sans); color:var(--accent-secondary); margin:8px 0;">3</div>
        <div style="font:11px var(--mono); color:var(--text-muted);">TUNNEL PROVIDERS</div>
        <div style="font:10px var(--sans); color:var(--text-secondary); margin-top:4px;">Cloudflare, ngrok, Local</div>
      </div>
      <div class="glass" style="margin:0; text-align:center; padding:20px;">
        <div style="font-size:28px;">ü§ñ</div>
        <div style="font:700 28px/1 var(--sans); color:var(--accent-gold); margin:8px 0;">2</div>
        <div style="font:11px var(--mono); color:var(--text-muted);">AI AGENTS</div>
        <div style="font:10px var(--sans); color:var(--text-secondary); margin-top:4px;">Stra≈ºnik Port√≥w + Architekt</div>
      </div>
    `;

    // Components table
    document.getElementById('netctrlComponents').innerHTML = NETCTRL_COMPONENTS.map(c => `
      <tr class="dr">
        <td class="w" style="font:11px var(--mono);">${c.name}</td>
        <td>${c.desc}</td>
        <td class="r">${c.size}</td>
      </tr>
    `).join('');

    // Agents & Tunnels
    document.getElementById('netctrlAgents').innerHTML = `
      <div>
        <div class="section-label">ü§ñ Agenty AI (Gemini-powered)</div>
        <div class="glass" style="margin:0 0 8px 0; border-left:3px solid var(--accent-danger);">
          <div style="font:700 13px/1 var(--sans); color:var(--text-primary);">Stra≈ºnik Port√≥w</div>
          <div style="font:11px/1.6 var(--sans); color:var(--text-secondary); margin-top:4px;">Role: Security Ops<br>Funkcje: analiza podatno≈õci, KILLTASK, monitoring exposed ports<br>AI: generateAgentReport(), analyzeConnectionSecurity()</div>
        </div>
        <div class="glass" style="margin:0; border-left:3px solid var(--accent-primary);">
          <div style="font:700 13px/1 var(--sans); color:var(--text-primary);">Architekt Po≈ÇƒÖcze≈Ñ</div>
          <div style="font:11px/1.6 var(--sans); color:var(--text-secondary); margin-top:4px;">Role: System Orchestrator<br>Funkcje: mapowanie tuneli, GATEWAY setup, WATCHDOG (5s)<br>VPN: Nord-Tunnel-X (Amsterdam, NL)</div>
        </div>
      </div>
      <div>
        <div class="section-label">üîó Tunele sieci</div>
        <div class="glass" style="margin:0 0 8px 0;">
          <div style="font:700 13px/1 var(--sans); color:var(--text-primary);">Cloudflare Prod Bridge</div>
          <div style="font:11px/1.6 var(--sans); color:var(--text-secondary); margin-top:4px;">
            ID: cf-x9j-22a | Port: 8000<br>
            URL: https://cf-x9j-22a.jimbo.net<br>
            isPersistent: ‚úÖ | Bandwidth: 240 KB/s
          </div>
        </div>
        <div style="font:12px/1.8 var(--sans); color:var(--text-secondary);">
          <strong>Watchdog:</strong> Przywraca persistent tunele co 5s<br>
          <strong>Obfuskacja:</strong> ID: <code style="color:var(--accent-primary); font:10px var(--mono);">cf-xxxxx-NN</code><br>
          <strong>Tworzenie:</strong> Modal z wyborem provider/port/obfuscate<br>
          <strong>Metryki:</strong> tunnel_created, tunnel_toggled, persistence_toggled
        </div>
      </div>
    `;

    // Services & Hooks
    document.getElementById('netctrlServices').innerHTML = NETCTRL_SERVICES.map(s => `
      <div class="glass" style="margin:0;">
        <div style="font:700 12px/1 var(--mono); color:var(--accent-primary); margin-bottom:6px;">${s.name}</div>
        <div style="font:11px/1.5 var(--sans); color:var(--text-secondary);">${s.desc}</div>
        <div style="font:10px var(--mono); color:var(--text-muted); margin-top:6px;">${s.size}</div>
      </div>
    `).join('') + `
      <div class="glass" style="margin:0; border-top:2px solid var(--accent-warning);">
        <div style="font:700 12px/1 var(--mono); color:var(--accent-warning); margin-bottom:6px;">Stack</div>
        <div style="display:flex; flex-wrap:wrap; gap:4px;">
          ${["React 19", "TypeScript 5.8", "Vite 6", "Recharts 3", "@google/genai", "jspdf", "pdf-lib"].map(t => `<span class="badge badge-active" style="font:10px var(--mono);">${t}</span>`).join('')}
        </div>
      </div>
    `;

    // Types
    document.getElementById('netctrlTypes').innerHTML = `
      <div class="scroll-x">
        <table class="dtable">
          <thead><tr><th>Nazwa</th><th>Typ</th><th>Pola / Warto≈õci</th></tr></thead>
          <tbody>
            ${NETCTRL_TYPES.map(t => {
              const typeColor = t.type === 'enum' ? 'var(--accent-warning)' : 'var(--accent-primary)';
              return `<tr class="dr"><td class="w" style="font:11px var(--mono);">${t.name}</td><td><span class="badge" style="background:${typeColor}20; color:${typeColor}; border-color:${typeColor}40;">${t.type}</span></td><td style="font:11px var(--mono); color:var(--text-secondary);">${t.values}</td></tr>`;
            }).join('')}
          </tbody>
        </table>
      </div>
    `;
  }

  // ============= COMMANDS =============
  const CMD_COLORS = {
    'OPSX': 'var(--accent-primary)',
    'Project': 'var(--accent-gold)',
    'OpenSpec': 'var(--accent-success)',
    'Podman': '#06b6d4',
    'PowerShell': '#0078d4',
    'CMD': '#c3861b',
    'Win+R': '#a855f7'
  };

  function getCmdColor(group) {
    for (const [key, color] of Object.entries(CMD_COLORS)) {
      if (group.includes(key)) return color;
    }
    return 'var(--text-secondary)';
  }

  function renderCommands() {
    filterCommands();

    // Populate provider selects
    const providerSelect = document.getElementById('keyProvider');
    const testSelect = document.getElementById('testProvider');
    Object.keys(API_KEY_TESTS).forEach(p => {
      providerSelect.innerHTML += `<option value="${p}">${p}</option>`;
      testSelect.innerHTML += `<option value="${p}">${p}</option>`;
    });

    // API docs links
    document.getElementById('apiDocsLinks').innerHTML = Object.entries(API_KEY_TESTS).map(([name, cfg]) =>
      `<a href="${cfg.doc}" target="_blank" rel="noopener" style="display:block; padding:6px 10px; background:var(--bg-card); border:1px solid var(--border); color:var(--accent-primary); font:11px var(--sans); text-decoration:none; transition:all 0.2s;" onmouseover="this.style.borderColor='var(--accent-primary)'" onmouseout="this.style.borderColor='var(--border)'">
        <strong>${name}</strong><br><span style="color:var(--text-muted); font:10px var(--mono);">${cfg.doc.replace('https://','')}</span>
      </a>`
    ).join('');

    renderApiKeys();
    updateTestInfo();
  }

  function filterCommands() {
    const container = document.getElementById('commandsList');
    const search = (document.getElementById('cmdSearch')?.value || '').toLowerCase();
    const filter = document.getElementById('cmdFilter')?.value || 'all';
    let html = '';
    let totalCount = 0;

    Object.entries(COMMANDS).forEach(([group, cmds]) => {
      if (filter !== 'all' && !group.includes(filter)) return;
      const filtered = cmds.filter(c =>
        search === '' || c.cmd.toLowerCase().includes(search) || c.desc.toLowerCase().includes(search)
      );
      if (filtered.length === 0) return;
      totalCount += filtered.length;

      const color = getCmdColor(group);
      html += `<h3 style="font: 800 12px/1 var(--mono); text-transform: uppercase; letter-spacing: 1px; color: ${color}; margin: 24px 0 12px;">${group} <span style="font-weight:400; color:var(--text-muted);">(${filtered.length})</span></h3>`;
      filtered.forEach(c => {
        const escaped = c.cmd.replace(/\\/g, '\\\\').replace(/'/g, "\\'").replace(/"/g, '&quot;');
        html += `<div class="command-block" onclick="copyToClipboard(decodeCmd('${btoa(unescape(encodeURIComponent(c.cmd)))}'))"><div style="display:flex; justify-content:space-between; gap:12px;"><div style="flex:1;"><strong style="color:${color}; word-break:break-all;">${c.cmd}</strong> <span style="color:var(--text-secondary); margin-left:8px; font-size:11px;">${c.desc}</span></div><span style="color:var(--text-muted); font-size:10px; flex-shrink:0;">üìã</span></div></div>`;
      });
    });

    // Workflow diagram (only if showing all or OPSX)
    if ((filter === 'all' || filter === 'OPSX') && search === '') {
      html += `<h3 style="font: 800 12px/1 var(--mono); text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); margin: 24px 0 12px;">üìä OpenSpec Workflow</h3>
      <div style="background:var(--bg-card); border:1px solid var(--border); padding:16px; font:13px/2 var(--mono); color:var(--text-secondary);">
        <span style="color:var(--accent-primary);">new</span> ‚Üí <span style="color:var(--accent-primary);">continue</span> (√óN) ‚Üí <span style="color:var(--accent-gold);">apply</span> ‚Üí <span style="color:var(--accent-warning);">verify</span> ‚Üí <span style="color:var(--accent-success);">archive</span>
        <br><span style="color:var(--text-muted);">albo:</span> <span style="color:var(--accent-primary);">new</span> ‚Üí <span style="color:var(--accent-secondary);">ff</span> ‚Üí <span style="color:var(--accent-gold);">apply</span> ‚Üí <span style="color:var(--accent-warning);">verify</span> ‚Üí <span style="color:var(--accent-success);">archive</span>
      </div>`;
    }

    container.innerHTML = html || '<div style="text-align:center; padding:30px; color:var(--text-muted);">Brak komend pasujƒÖcych do filtra</div>';
    const countEl = document.getElementById('cmdCount');
    if (countEl) countEl.textContent = `${totalCount} komend`;
  }

  function decodeCmd(b64) {
    return decodeURIComponent(escape(atob(b64)));
  }

  function copyAllCommands() {
    const filter = document.getElementById('cmdFilter')?.value || 'all';
    const groups = Object.entries(COMMANDS).filter(([g]) => filter === 'all' || g.includes(filter));
    const all = groups.map(([g, cmds]) => `# ${g}\n` + cmds.map(c => `${c.cmd}  ‚Äî ${c.desc}`).join('\n')).join('\n\n');
    navigator.clipboard.writeText(all).then(() => showToast('Skopiowano', `${groups.reduce((a,[,c]) => a+c.length, 0)} komend w schowku`));
  }

  // ============= API KEYS VAULT =============
  let apiKeys = JSON.parse(localStorage.getItem('kgt_apikeys') || '[]');

  function renderApiKeys() {
    const container = document.getElementById('apiKeysList');
    if (apiKeys.length === 0) {
      container.innerHTML = '<div style="text-align:center; padding:20px; color:var(--text-muted); font:12px var(--sans);">Brak zapisanych kluczy. Dodaj pierwszy klucz powy≈ºej.</div>';
      return;
    }
    container.innerHTML = `<table class="dtable"><thead><tr><th>Provider</th><th>Etykieta</th><th>Klucz</th><th>Dodano</th><th style="text-align:right;">Akcje</th></tr></thead><tbody>` +
      apiKeys.map((k, i) => {
        const masked = k.key.slice(0, 6) + '‚Ä¢'.repeat(Math.min(k.key.length - 10, 20)) + k.key.slice(-4);
        return `<tr class="dr">
          <td class="w">${k.provider}</td>
          <td>${k.label || '‚Äî'}</td>
          <td style="font:11px var(--mono);">
            <span id="key-display-${i}">${masked}</span>
            <span id="key-full-${i}" style="display:none; color:var(--accent-warning);">${k.key}</span>
          </td>
          <td style="font:10px var(--mono); color:var(--text-muted);">${k.added || '‚Äî'}</td>
          <td style="text-align:right; white-space:nowrap;">
            <button class="btn" style="padding:4px 8px; font-size:12px;" onclick="toggleKeyVisibility(${i})" title="Poka≈º/ukryj">üëÅÔ∏è</button>
            <button class="btn" style="padding:4px 8px; font-size:12px;" onclick="copyKeyToClipboard(${i})" title="Kopiuj">üìã</button>
            <button class="btn" style="padding:4px 8px; font-size:12px;" onclick="useKeyForTest(${i})" title="Testuj">üß™</button>
            <button class="btn" style="padding:4px 8px; font-size:12px; color:var(--accent-danger);" onclick="deleteApiKey(${i})" title="Usu≈Ñ">‚úï</button>
          </td>
        </tr>`;
      }).join('') +
    `</tbody></table>`;
  }

  function addApiKey() {
    const provider = document.getElementById('keyProvider').value;
    const label = document.getElementById('keyLabel').value.trim();
    const key = document.getElementById('keyValue').value.trim();
    if (!provider) { showToast('‚ö†Ô∏è', 'Wybierz provider'); return; }
    if (!key) { showToast('‚ö†Ô∏è', 'Wpisz klucz API'); return; }
    apiKeys.push({ provider, label, key, added: new Date().toISOString().slice(0, 10) });
    saveApiKeys();
    document.getElementById('keyLabel').value = '';
    document.getElementById('keyValue').value = '';
    renderApiKeys();
    showToast('üîë Dodano', `${provider} ‚Äî ${label || 'bez etykiety'}`);
  }

  function deleteApiKey(i) {
    if (!confirm(`UsunƒÖƒá klucz ${apiKeys[i].provider}?`)) return;
    apiKeys.splice(i, 1);
    saveApiKeys(); renderApiKeys();
    showToast('Usuniƒôto', 'Klucz usuniƒôty');
  }

  function toggleKeyVisibility(i) {
    const disp = document.getElementById(`key-display-${i}`);
    const full = document.getElementById(`key-full-${i}`);
    if (full.style.display === 'none') { full.style.display = 'inline'; disp.style.display = 'none'; }
    else { full.style.display = 'none'; disp.style.display = 'inline'; }
  }

  function copyKeyToClipboard(i) {
    navigator.clipboard.writeText(apiKeys[i].key).then(() => showToast('üìã', `Klucz ${apiKeys[i].provider} skopiowany`));
  }

  function useKeyForTest(i) {
    document.getElementById('testProvider').value = apiKeys[i].provider;
    document.getElementById('testKey').value = apiKeys[i].key;
    updateTestInfo();
    showToast('üß™', `Klucz ${apiKeys[i].provider} za≈Çadowany do testera`);
    // Scroll to tester
    document.getElementById('testProvider').scrollIntoView({ behavior: 'smooth', block: 'center' });
  }

  function saveApiKeys() { localStorage.setItem('kgt_apikeys', JSON.stringify(apiKeys)); }

  function exportKeys() {
    if (apiKeys.length === 0) { showToast('‚ö†Ô∏è', 'Brak kluczy do eksportu'); return; }
    const data = JSON.stringify(apiKeys, null, 2);
    const blob = new Blob([data], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = `jimbo-api-keys-${new Date().toISOString().slice(0,10)}.json`;
    a.click(); URL.revokeObjectURL(url);
    showToast('üì§', `Wyeksportowano ${apiKeys.length} kluczy`);
  }

  function importKeys() {
    const input = document.createElement('input');
    input.type = 'file'; input.accept = '.json';
    input.onchange = e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = ev => {
        try {
          const imported = JSON.parse(ev.target.result);
          if (!Array.isArray(imported)) throw new Error('Invalid format');
          const count = imported.length;
          imported.forEach(k => {
            if (k.provider && k.key && !apiKeys.find(existing => existing.provider === k.provider && existing.key === k.key)) {
              apiKeys.push({ provider: k.provider, label: k.label || '', key: k.key, added: k.added || new Date().toISOString().slice(0,10) });
            }
          });
          saveApiKeys(); renderApiKeys();
          showToast('üì•', `Zaimportowano ${count} kluczy (deduplikacja)`);
        } catch (err) { showToast('‚ùå', 'B≈Çƒôdny format pliku JSON'); }
      };
      reader.readAsText(file);
    };
    input.click();
  }

  // ============= API KEY TESTER =============
  function updateTestInfo() {
    const provider = document.getElementById('testProvider').value;
    const cfg = API_KEY_TESTS[provider];
    if (!cfg) { document.getElementById('testInfo').innerHTML = ''; return; }
    document.getElementById('testInfo').innerHTML = `
      <strong>${provider}</strong> ‚Äî 
      ${cfg.method} <code style="color:var(--accent-primary); font:10px var(--mono);">${cfg.url || '(wymaga URL)'}</code>
      ${cfg.note ? `<br><span style="color:var(--accent-warning);">${cfg.note}</span>` : ''}
      ${cfg.successCodes ? `<br>Dozwolone kody: ${cfg.successCodes.join(', ')}` : ''}
    `;
  }

  async function testApiKey() {
    const provider = document.getElementById('testProvider').value;
    const key = document.getElementById('testKey').value.trim();
    const resultDiv = document.getElementById('testResult');
    const btn = document.getElementById('testBtn');

    if (!provider || !key) { showToast('‚ö†Ô∏è', 'Wybierz provider i wpisz klucz'); return; }

    const cfg = API_KEY_TESTS[provider];
    if (!cfg || !cfg.url) { showToast('‚ö†Ô∏è', `${provider}: brak URL testowego`); return; }

    btn.textContent = '‚è≥ Testujƒô...';
    btn.disabled = true;
    resultDiv.style.display = 'block';
    resultDiv.innerHTML = '<div style="padding:12px; background:var(--bg-card); border:1px solid var(--border); font:12px var(--mono); color:var(--text-muted);">Wysy≈Çam request...</div>';

    try {
      const url = cfg.appendKey ? cfg.url + key : cfg.url;
      const headers = {};
      if (cfg.headerKey && !cfg.appendKey) {
        headers[cfg.headerKey] = (cfg.headerPrefix || '') + key;
      }
      if (cfg.extraHeaders) Object.assign(headers, cfg.extraHeaders);

      const opts = { method: cfg.method, headers };
      if (cfg.body && cfg.method === 'POST') opts.body = cfg.body;

      const resp = await fetch(url, opts);
      const status = resp.status;
      let bodyText = '';
      try { bodyText = await resp.text(); } catch(e) {}
      let bodyPreview = bodyText.slice(0, 500);

      const successCodes = cfg.successCodes || [200];
      const isOk = successCodes.includes(status);

      resultDiv.innerHTML = `
        <div style="padding:12px; background:var(--bg-card); border:1px solid ${isOk ? 'var(--accent-success)' : 'var(--accent-danger)'}; font:12px var(--mono);">
          <div style="margin-bottom:8px;">
            <span style="font-size:18px;">${isOk ? '‚úÖ' : '‚ùå'}</span>
            <strong style="color:${isOk ? 'var(--accent-success)' : 'var(--accent-danger)'};">${provider} ‚Äî HTTP ${status}</strong>
            <span style="color:var(--text-muted); margin-left:8px;">${isOk ? 'Klucz WA≈ªNY' : 'Klucz NIEWA≈ªNY lub b≈ÇƒÖd'}</span>
          </div>
          <details><summary style="cursor:pointer; color:var(--accent-primary);">Poka≈º response</summary>
            <pre style="margin-top:8px; padding:8px; background:rgba(0,0,0,0.3); color:var(--text-secondary); font:10px/1.5 var(--mono); white-space:pre-wrap; word-break:break-all; max-height:200px; overflow:auto;">${bodyPreview.replace(/</g,'&lt;')}</pre>
          </details>
        </div>
      `;
      showToast(isOk ? '‚úÖ' : '‚ùå', `${provider}: HTTP ${status}`);
    } catch (err) {
      resultDiv.innerHTML = `
        <div style="padding:12px; background:var(--bg-card); border:1px solid var(--accent-warning); font:12px var(--mono);">
          <span style="font-size:18px;">‚ö†Ô∏è</span>
          <strong style="color:var(--accent-warning);">CORS / Network Error</strong>
          <div style="color:var(--text-secondary); margin-top:6px;">${err.message}</div>
          <div style="color:var(--text-muted); margin-top:8px; font-size:11px;">U≈ºyj przycisku <strong>üìã curl</strong> aby skopiowaƒá komendƒô testowƒÖ do terminala.</div>
        </div>
      `;
      showToast('‚ö†Ô∏è', 'CORS error ‚Äî u≈ºyj curl z terminala');
    } finally {
      btn.textContent = 'üß™ Testuj';
      btn.disabled = false;
    }
  }

  function copyCurlTest() {
    const provider = document.getElementById('testProvider').value;
    const key = document.getElementById('testKey').value.trim();
    if (!provider || !key) { showToast('‚ö†Ô∏è', 'Wybierz provider i wpisz klucz'); return; }

    const cfg = API_KEY_TESTS[provider];
    if (!cfg || !cfg.url) { showToast('‚ö†Ô∏è', `${provider}: brak URL`); return; }

    const url = cfg.appendKey ? cfg.url + key : cfg.url;
    let curl = `curl -s -o NUL -w "%{http_code}" -X ${cfg.method} "${url}"`;
    if (cfg.headerKey && !cfg.appendKey) {
      curl += ` -H "${cfg.headerKey}: ${(cfg.headerPrefix || '')}${key}"`;
    }
    if (cfg.extraHeaders) {
      Object.entries(cfg.extraHeaders).forEach(([h, v]) => { curl += ` -H "${h}: ${v}"`; });
    }
    if (cfg.body && cfg.method === 'POST') {
      curl += ` -d '${cfg.body}'`;
    }
    curl += '\n# 200 = OK, 401/403 = Invalid Key';

    navigator.clipboard.writeText(curl).then(() => showToast('üìã curl', `Komenda ${provider} skopiowana`));
  }

  // ============= NOTES =============
  function saveNotes() { localStorage.setItem('kgt_notes', document.getElementById('notesEditor').value); showToast('Zapisano', 'Notatki zapisane'); }
  function exportNotes() {
    const notes = document.getElementById('notesEditor').value;
    navigator.clipboard.writeText(`# Project Notes\nDate: ${new Date().toISOString().slice(0, 10)}\n\n${notes || '(brak notatek)'}`).then(() => showToast('Eksport', 'Notatki w schowku'));
  }
  function clearNotes() { if (confirm('Wyczy≈õciƒá notatki?')) { document.getElementById('notesEditor').value = ''; localStorage.removeItem('kgt_notes'); showToast('OK', 'Notatki wyczyszczone'); } }
  function loadNotes() { document.getElementById('notesEditor').value = localStorage.getItem('kgt_notes') || ''; }

  // ============= UTILITY =============
  function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => showToast('Copied', text.length > 50 ? text.slice(0, 50) + '...' : text));
  }

  function showToast(title, msg) {
    document.getElementById('toastTitle').textContent = title;
    document.getElementById('toastMessage').textContent = msg;
    const t = document.getElementById('toast');
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 3000);
  }

  function updateStats() {
    document.getElementById('statModels').textContent = MODELS.length;
    document.getElementById('statSkills').textContent = Object.values(SKILLS).reduce((a, s) => a + s.length, 0);
    document.getElementById('statTasks').textContent = tasks.length;
  }
  </script>
</body>
</html>
